import{t as e}from"./hooks-BVZKHwJG.js";import{K as t,T as n,W as r,Z as i,s as a,t as o}from"./index-De71N5Dy.js";import{t as s}from"./createLucideIcon-UCLnlboM.js";import{t as c}from"./book-open-C5iUkNzV.js";import{t as l}from"./clock-CYmahE3n.js";import"./card-D2-K7jj_.js";import{n as u,t as d}from"./TableWidget-ezCFp5ps.js";import"./scroll-area-RaNtGQ1I.js";import"./table-rrTSX0KC.js";var f=s(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),p=i(r()),m=i(t());function h(t,n,r){return e({...o.analytics.content._ctx.mostAccessed(t,n,r),errorMessage:`Failed to load most accessed materials`,fallbackValue:void 0})}function g(t){return e({...o.analytics.content._ctx.averageTime(t),errorMessage:`Failed to load average time spent`,fallbackValue:void 0})}function _(t,n,r){return e({...o.analytics.content._ctx.engagementOverTime(t,n,r),errorMessage:`Failed to load engagement over time`,fallbackValue:void 0})}var v=i(n());const y={breadcrumb:`Content Analytics`};function b(){let e=a(e=>e.courses.currentCourseId),[t,n]=(0,m.useState)((0,p.default)().subtract(30,`day`)),[r,i]=(0,m.useState)((0,p.default)()),{data:o}=h(e,t.toISOString(),r.toISOString()),{data:s}=g(e),{data:y}=_(e,t.toISOString(),r.toISOString()),b=o?.materials.reduce((e,t)=>e+t.accessCount,0)??0;return(0,v.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`h1`,{className:`text-3xl font-bold`,children:`Content Analytics`}),(0,v.jsx)(`p`,{className:`text-muted-foreground`,children:`Track material access and engagement`})]}),(0,v.jsxs)(`div`,{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-4`,children:[(0,v.jsx)(u,{title:`Total Content Views`,value:b,description:`Last 30 days`,icon:f}),(0,v.jsx)(u,{title:`Avg Time Spent`,value:`${((s?.averageSeconds??0)/60).toFixed(1)} min`,description:`Per content item`,icon:l}),(0,v.jsx)(u,{title:`Unique Materials`,value:o?.materials.length??0,description:`Accessed content`,icon:c})]}),(0,v.jsx)(d,{title:`Material Access Details`,columns:[{header:`Content ID`,accessorKey:`contentId`},{header:`Type`,accessorKey:`type`},{header:`Access Count`,accessorKey:`accessCount`,cell:e=>e.toLocaleString()}],data:o?.materials||[]})]})}const x=b;export{x as Component,y as handle};