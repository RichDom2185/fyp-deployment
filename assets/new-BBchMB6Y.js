import{K as e,T as t,Z as n,c as r,n as i,o as a,s as o,y as s}from"./index-De71N5Dy.js";import{i as c,r as l,t as u}from"./utils-BVdesv7M.js";import{n as d,t as f}from"./button-DPMtwoy8.js";import{t as p}from"./RichTextEditor-DIUjZ3l2.js";import{t as m}from"./check-KSYZl4kN.js";import{t as h}from"./chevrons-up-down-BkMe_8jF.js";import{t as g}from"./plus-CkBlMRvf.js";import{t as _}from"./search-C-fGLgKk.js";import{t as ee}from"./input-BU6q5fO9.js";import{t as v}from"./dist-CRZMFenk.js";import"./separator-BrSnISek.js";import{c as y,i as b,r as x,s as S,t as C}from"./dist-DEnBD8u_.js";import{n as w,t as T}from"./dist-DOEaHXwO.js";import{n as te,t as E}from"./dist-Bf8JKXZP.js";import{a as D,i as O,n as ne,t as k}from"./es2015-nRZsoKYs.js";import{t as A}from"./dist-3ukNXeXU.js";import{_ as j,d as M,f as N,g as re,h as ie,l as P,m as ae,p as oe,u as se,v as ce}from"./dialog-BifXuZ_c.js";import{a as le,i as ue,n as de,r as fe,t as pe}from"./dist-D3yp3Nr8.js";import"./shim-CKHktkII.js";var F=n(e(),1),me=1,he=.9,ge=.8,_e=.17,I=.1,L=.999,ve=.9999,ye=.99,be=/[\\\/_+.#"@\[\(\{&]/,xe=/[\\\/_+.#"@\[\(\{&]/g,Se=/[\s-]/,Ce=/[\s-]/g;function we(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?me:ye;var s=`${i},${a}`;if(o[s]!==void 0)return o[s];for(var c=r.charAt(a),l=n.indexOf(c,i),u=0,d,f,p,m;l>=0;)d=we(e,t,n,r,l+1,a+1,o),d>u&&(l===i?d*=me:be.test(e.charAt(l-1))?(d*=ge,p=e.slice(i,l-1).match(xe),p&&i>0&&(d*=L**+p.length)):Se.test(e.charAt(l-1))?(d*=he,m=e.slice(i,l-1).match(Ce),m&&i>0&&(d*=L**+m.length)):(d*=_e,i>0&&(d*=L**+(l-i))),e.charAt(l)!==t.charAt(a)&&(d*=ve)),(d<I&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=we(e,t,n,r,l+1,a+2,o),f*I>d&&(d=f*I)),d>u&&(u=d),l=n.indexOf(c,l+1);return o[s]=u,u}function Te(e){return e.toLowerCase().replace(Ce,` `)}function Ee(e,t,n){return e=n&&n.length>0?`${e+` `+n.join(` `)}`:e,we(e,t,Te(e),Te(t),0,0,{})}var R=`[cmdk-group=""]`,De=`[cmdk-group-items=""]`,Oe=`[cmdk-group-heading=""]`,ke=`[cmdk-item=""]`,Ae=`${ke}:not([aria-disabled="true"])`,je=`cmdk-item-select`,z=`data-value`,Me=(e,t,n)=>Ee(e,t,n),Ne=F.createContext(void 0),B=()=>F.useContext(Ne),Pe=F.createContext(void 0),Fe=()=>F.useContext(Pe),Ie=F.createContext(void 0),Le=F.forwardRef((e,t)=>{let n=U(()=>({search:``,value:e.value??e.defaultValue??``,selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}})),r=U(()=>new Set),i=U(()=>new Map),a=U(()=>new Map),o=U(()=>new Set),s=Je(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:m,disablePointerSelection:h=!1,vimBindings:g=!0,..._}=e,ee=w(),y=w(),b=w(),x=F.useRef(null),S=Xe();H(()=>{if(u!==void 0){let e=u.trim();n.current.value=e,C.emit()}},[u]),H(()=>{S(6,ne)},[]);let C=F.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,o;if(!Object.is(n.current[e],t)){if(n.current[e]=t,e===`search`)O(),E(),S(1,D);else if(e===`value`){if(document.activeElement.hasAttribute(`cmdk-input`)||document.activeElement.hasAttribute(`cmdk-root`)){let e=document.getElementById(b);e?e.focus():(i=document.getElementById(ee))==null||i.focus()}if(S(7,()=>{n.current.selectedItemId=k()?.id,C.emit()}),r||S(5,ne),s.current?.value!==void 0){let e=t??``;(o=(a=s.current).onValueChange)==null||o.call(a,e);return}}C.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),T=F.useMemo(()=>({value:(e,t,r)=>{t!==a.current.get(e)?.value&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,te(t,r)),S(2,()=>{E(),C.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),S(3,()=>{O(),E(),n.current.value||D(),C.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=k();S(4,()=>{O(),t?.getAttribute(`id`)===e&&D(),C.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e[`aria-label`],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:ee,inputId:b,labelId:y,listInnerRef:x}),[]);function te(e,t){let r=s.current?.filter??Me;return e?r(e,n.current.search,t):0}function E(){if(!n.current.search||s.current.shouldFilter===!1)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=x.current;A().sort((t,n)=>{let r=t.getAttribute(`id`),i=n.getAttribute(`id`);return(e.get(i)??0)-(e.get(r)??0)}).forEach(e=>{let t=e.closest(De);t?t.appendChild(e.parentElement===t?e:e.closest(`${De} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${De} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=x.current?.querySelector(`${R}[${z}="${encodeURIComponent(e[0])}"]`);t?.parentElement.appendChild(t)})}function D(){let e=A().find(e=>e.getAttribute(`aria-disabled`)!==`true`)?.getAttribute(z);C.setState(`value`,e||void 0)}function O(){if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let t of r.current){let r=te(a.current.get(t)?.value??``,a.current.get(t)?.keywords??[]);n.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of i.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=e}function ne(){var e;let t=k();t&&(t.parentElement?.firstChild===t&&((e=t.closest(R)?.querySelector(Oe))==null||e.scrollIntoView({block:`nearest`})),t.scrollIntoView({block:`nearest`}))}function k(){return x.current?.querySelector(`${ke}[aria-selected="true"]`)}function A(){return Array.from(x.current?.querySelectorAll(Ae)||[])}function j(e){let t=A()[e];t&&C.setState(`value`,t.getAttribute(z))}function M(e){var t;let n=k(),r=A(),i=r.findIndex(e=>e===n),a=r[i+e];(t=s.current)!=null&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&C.setState(`value`,a.getAttribute(z))}function N(e){let t=k()?.closest(R),n;for(;t&&!n;)t=e>0?Ke(t,R):qe(t,R),n=t?.querySelector(Ae);n?C.setState(`value`,n.getAttribute(z)):M(e)}let re=()=>j(A().length-1),ie=e=>{e.preventDefault(),e.metaKey?re():e.altKey?N(1):M(1)},P=e=>{e.preventDefault(),e.metaKey?j(0):e.altKey?N(-1):M(-1)};return F.createElement(v.div,{ref:t,tabIndex:-1,..._,"cmdk-root":``,onKeyDown:e=>{var t;(t=_.onKeyDown)==null||t.call(_,e);let n=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||n))switch(e.key){case`n`:case`j`:g&&e.ctrlKey&&ie(e);break;case`ArrowDown`:ie(e);break;case`p`:case`k`:g&&e.ctrlKey&&P(e);break;case`ArrowUp`:P(e);break;case`Home`:e.preventDefault(),j(0);break;case`End`:e.preventDefault(),re();break;case`Enter`:{e.preventDefault();let t=k();if(t){let e=new Event(je);t.dispatchEvent(e)}}}}},F.createElement(`label`,{"cmdk-label":``,htmlFor:T.inputId,id:T.labelId,style:Qe},c),G(e,e=>F.createElement(Pe.Provider,{value:C},F.createElement(Ne.Provider,{value:T},e))))}),Re=F.forwardRef((e,t)=>{let n=w(),r=F.useRef(null),i=F.useContext(Ie),a=B(),o=Je(e),s=o.current?.forceMount??i?.forceMount;H(()=>{if(!s)return a.item(n,i?.id)},[s]);let c=Ye(n,r,[e.value,e.children,r],e.keywords),u=Fe(),d=W(e=>e.value&&e.value===c.current),f=W(e=>s||a.filter()===!1?!0:e.search?e.filtered.items.get(n)>0:!0);F.useEffect(()=>{let t=r.current;if(!(!t||e.disabled))return t.addEventListener(je,p),()=>t.removeEventListener(je,p)},[f,e.onSelect,e.disabled]);function p(){var e,t;m(),(t=(e=o.current).onSelect)==null||t.call(e,c.current)}function m(){u.setState(`value`,c.current,!0)}if(!f)return null;let{disabled:h,value:g,onSelect:_,forceMount:ee,keywords:y,...b}=e;return F.createElement(v.div,{ref:l(r,t),...b,id:n,"cmdk-item":``,role:`option`,"aria-disabled":!!h,"aria-selected":!!d,"data-disabled":!!h,"data-selected":!!d,onPointerMove:h||a.getDisablePointerSelection()?void 0:m,onClick:h?void 0:p},e.children)}),ze=F.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=w(),s=F.useRef(null),c=F.useRef(null),u=w(),d=B(),f=W(e=>i||d.filter()===!1?!0:e.search?e.filtered.groups.has(o):!0);H(()=>d.group(o),[]),Ye(o,s,[e.value,e.heading,c]);let p=F.useMemo(()=>({id:o,forceMount:i}),[i]);return F.createElement(v.div,{ref:l(s,t),...a,"cmdk-group":``,role:`presentation`,hidden:f?void 0:!0},n&&F.createElement(`div`,{ref:c,"cmdk-group-heading":``,"aria-hidden":!0,id:u},n),G(e,e=>F.createElement(`div`,{"cmdk-group-items":``,role:`group`,"aria-labelledby":n?u:void 0},F.createElement(Ie.Provider,{value:p},e))))}),Be=F.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=F.useRef(null),a=W(e=>!e.search);return!n&&!a?null:F.createElement(v.div,{ref:l(i,t),...r,"cmdk-separator":``,role:`separator`})}),Ve=F.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=Fe(),o=W(e=>e.search),s=W(e=>e.selectedItemId),c=B();return F.useEffect(()=>{e.value!=null&&a.setState(`search`,e.value)},[e.value]),F.createElement(v.input,{ref:t,...r,"cmdk-input":``,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,"aria-autocomplete":`list`,role:`combobox`,"aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":s,id:c.inputId,type:`text`,value:i?e.value:o,onChange:e=>{i||a.setState(`search`,e.target.value),n?.(e.target.value)}})}),He=F.forwardRef((e,t)=>{let{children:n,label:r=`Suggestions`,...i}=e,a=F.useRef(null),o=F.useRef(null),s=W(e=>e.selectedItemId),c=B();return F.useEffect(()=>{if(o.current&&a.current){let e=o.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty(`--cmdk-list-height`,n.toFixed(1)+`px`)})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),F.createElement(v.div,{ref:l(a,t),...i,"cmdk-list":``,role:`listbox`,tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:c.listId},G(e,e=>F.createElement(`div`,{ref:l(o,c.listInnerRef),"cmdk-list-sizer":``},e)))}),Ue=F.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...s}=e;return F.createElement(ae,{open:n,onOpenChange:r},F.createElement(oe,{container:o},F.createElement(N,{"cmdk-overlay":``,className:i}),F.createElement(se,{"aria-label":e.label,"cmdk-dialog":``,className:a},F.createElement(Le,{ref:t,...s}))))}),We=F.forwardRef((e,t)=>W(e=>e.filtered.count===0)?F.createElement(v.div,{ref:t,...e,"cmdk-empty":``,role:`presentation`}):null),Ge=F.forwardRef((e,t)=>{let{progress:n,children:r,label:i=`Loading...`,...a}=e;return F.createElement(v.div,{ref:t,...a,"cmdk-loading":``,role:`progressbar`,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},G(e,e=>F.createElement(`div`,{"aria-hidden":!0},e)))}),V=Object.assign(Le,{List:He,Item:Re,Input:Ve,Group:ze,Separator:Be,Dialog:Ue,Empty:We,Loading:Ge});function Ke(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function qe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Je(e){let t=F.useRef(e);return H(()=>{t.current=e}),t}var H=typeof window>`u`?F.useEffect:F.useLayoutEffect;function U(e){let t=F.useRef();return t.current===void 0&&(t.current=e()),t}function W(e){let t=Fe(),n=()=>e(t.snapshot());return F.useSyncExternalStore(t.subscribe,n,n)}function Ye(e,t,n,r=[]){let i=F.useRef(),a=B();return H(()=>{var o;let s=(()=>{for(let e of n){if(typeof e==`string`)return e.trim();if(typeof e==`object`&&`current`in e)return e.current?e.current.textContent?.trim():i.current}})(),c=r.map(e=>e.trim());a.value(e,s,c),(o=t.current)==null||o.setAttribute(z,s),i.current=s}),i}var Xe=()=>{let[e,t]=F.useState(),n=U(()=>new Map);return H(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function Ze(e){let t=e.type;return typeof t==`function`?t(e.props):`render`in t?t.render(e.props):e}function G({asChild:e,children:t},n){return e&&F.isValidElement(t)?F.cloneElement(Ze(t),{ref:t.ref},n(t.props.children)):n(t)}var Qe={position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,borderWidth:`0`},K=n(t());function $e({className:e,...t}){return(0,K.jsx)(V,{"data-slot":`command`,className:u(`bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md`,e),...t})}function et({className:e,...t}){return(0,K.jsxs)(`div`,{"data-slot":`command-input-wrapper`,className:`flex h-9 items-center gap-2 border-b px-3`,children:[(0,K.jsx)(_,{className:`size-4 shrink-0 opacity-50`}),(0,K.jsx)(V.Input,{"data-slot":`command-input`,className:u(`placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]})}function tt({className:e,...t}){return(0,K.jsx)(V.List,{"data-slot":`command-list`,className:u(`max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto`,e),...t})}function nt({...e}){return(0,K.jsx)(V.Empty,{"data-slot":`command-empty`,className:`py-6 text-center text-sm`,...e})}function rt({className:e,...t}){return(0,K.jsx)(V.Group,{"data-slot":`command-group`,className:u(`text-foreground **:[[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 **:[[cmdk-group-heading]]:px-2 **:[[cmdk-group-heading]]:py-1.5 **:[[cmdk-group-heading]]:text-xs **:[[cmdk-group-heading]]:font-medium`,e),...t})}function it({className:e,...t}){return(0,K.jsx)(V.Item,{"data-slot":`command-item`,className:u(`data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,e),...t})}var q=`Popover`,[at,ot]=S(q,[le]),J=le(),[st,Y]=at(q),ct=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,s=J(t),c=F.useRef(null),[l,u]=F.useState(!1),[d,f]=T({prop:r,defaultProp:i??!1,onChange:a,caller:q});return(0,K.jsx)(ue,{...s,children:(0,K.jsx)(st,{scope:t,contentId:w(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:F.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:l,onCustomAnchorAdd:F.useCallback(()=>u(!0),[]),onCustomAnchorRemove:F.useCallback(()=>u(!1),[]),modal:o,children:n})})};ct.displayName=q;var lt=`PopoverAnchor`,ut=F.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(lt,n),a=J(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return F.useEffect(()=>(o(),()=>s()),[o,s]),(0,K.jsx)(pe,{...a,...r,ref:t})});ut.displayName=lt;var dt=`PopoverTrigger`,ft=F.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(dt,n),a=J(n),o=c(t,i.triggerRef),s=(0,K.jsx)(C.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Et(i.open),...r,ref:o,onClick:y(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:(0,K.jsx)(pe,{asChild:!0,...a,children:s})});ft.displayName=dt;var pt=`PopoverPortal`,[mt,ht]=at(pt,{forceMount:void 0}),gt=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=Y(pt,t);return(0,K.jsx)(mt,{scope:t,forceMount:n,children:(0,K.jsx)(A,{present:n||a.open,children:(0,K.jsx)(E,{asChild:!0,container:i,children:r})})})};gt.displayName=pt;var X=`PopoverContent`,_t=F.forwardRef((e,t)=>{let n=ht(X,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=Y(X,e.__scopePopover);return(0,K.jsx)(A,{present:r||a.open,children:a.modal?(0,K.jsx)(yt,{...i,ref:t}):(0,K.jsx)(bt,{...i,ref:t})})});_t.displayName=X;var vt=x(`PopoverContent.RemoveScroll`),yt=F.forwardRef((e,t)=>{let n=Y(X,e.__scopePopover),r=F.useRef(null),i=c(t,r),a=F.useRef(!1);return F.useEffect(()=>{let e=r.current;if(e)return k(e)},[]),(0,K.jsx)(ne,{as:vt,allowPinchZoom:!0,children:(0,K.jsx)(xt,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:y(e.onCloseAutoFocus,e=>{e.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:y(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0;a.current=t.button===2||n},{checkForDefaultPrevented:!1}),onFocusOutside:y(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),bt=F.forwardRef((e,t)=>{let n=Y(X,e.__scopePopover),r=F.useRef(!1),i=F.useRef(!1);return(0,K.jsx)(xt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),xt=F.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Y(X,n),p=J(n);return O(),(0,K.jsx)(D,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,K.jsx)(te,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:(0,K.jsx)(fe,{"data-state":Et(f.open),role:`dialog`,id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-popover-content-available-width":`var(--radix-popper-available-width)`,"--radix-popover-content-available-height":`var(--radix-popper-available-height)`,"--radix-popover-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-popover-trigger-height":`var(--radix-popper-anchor-height)`}})})})}),St=`PopoverClose`,Ct=F.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(St,n);return(0,K.jsx)(C.button,{type:`button`,...r,ref:t,onClick:y(e.onClick,()=>i.onOpenChange(!1))})});Ct.displayName=St;var wt=`PopoverArrow`,Tt=F.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=J(n);return(0,K.jsx)(de,{...i,...r,ref:t})});Tt.displayName=wt;function Et(e){return e?`open`:`closed`}var Dt=ct,Ot=ft,kt=gt,At=_t;function jt({...e}){return(0,K.jsx)(Dt,{"data-slot":`popover`,...e})}function Mt({...e}){return(0,K.jsx)(Ot,{"data-slot":`popover-trigger`,...e})}function Nt({className:e,align:t=`center`,sideOffset:n=4,...r}){return(0,K.jsx)(kt,{children:(0,K.jsx)(At,{"data-slot":`popover-content`,align:t,sideOffset:n,className:u(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden`,e),...r})})}var Z=`__create_new_option__`,Pt=(e,t)=>{let n=e.map(e=>({label:e.label,value:e.label,actualValue:e.value}));return t&&n.push({label:`Create (hidden)`,value:Z,actualValue:``}),n};function Ft({options:e,placeholder:t,onSelect:n,onShouldCreate:r}){let[i,a]=(0,F.useState)(!1),[o,s]=(0,F.useState)(``),[c,l]=(0,F.useState)(``),d=Pt(e,!!r),p=e=>{l(e),n?.(e)},_=e=>{l(Z),r(e)};return(0,K.jsxs)(jt,{open:i,onOpenChange:a,children:[(0,K.jsx)(Mt,{asChild:!0,children:(0,K.jsxs)(f,{variant:`outline`,role:`combobox`,"aria-expanded":i,className:`w-full justify-between`,children:[c===Z?(0,K.jsxs)(K.Fragment,{children:[`Create new: “`,o,`”`]}):c?d.find(e=>e.actualValue===c)?.label:t??`Select`,(0,K.jsx)(h,{className:`ml-2 h-4 w-4 shrink-0 opacity-50`})]})}),(0,K.jsx)(Nt,{className:`w-(--radix-popover-trigger-width) p-0`,children:(0,K.jsxs)($e,{filter:(e,t)=>{if(e===Z)return 1;let n=t.toLowerCase().split(/\s+/),r=e.toLowerCase();return n.every(e=>r.includes(e))?1:0},children:[(0,K.jsx)(et,{placeholder:`Search`,value:o,onValueChange:s}),(0,K.jsxs)(tt,{children:[(0,K.jsx)(nt,{children:`No option found.`}),(0,K.jsxs)(rt,{children:[d.filter(e=>e.value!==Z).map(e=>(0,K.jsxs)(it,{value:e.value,onSelect:()=>{p(e.actualValue===c?``:e.actualValue),a(!1)},children:[(0,K.jsx)(m,{className:u(`mr-2 h-4 w-4`,c===e.actualValue?`opacity-100`:`opacity-0`)}),e.label]},e.value)),r&&o&&(0,K.jsxs)(it,{value:Z,onSelect:()=>{_(o),a(!1)},children:[(0,K.jsx)(g,{className:`mr-2 h-4 w-4`}),`Create “`,o,`”…`]},Z)]})]})]})})]})}var It=Ft,Lt=`AlertDialog`,[Rt,zt]=S(Lt,[ce]),Q=ce(),Bt=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,K.jsx)(ae,{...r,...n,modal:!0})};Bt.displayName=Lt;var Vt=`AlertDialogTrigger`,Ht=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(re,{...i,...r,ref:t})});Ht.displayName=Vt;var Ut=`AlertDialogPortal`,Wt=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,K.jsx)(oe,{...r,...n})};Wt.displayName=Ut;var Gt=`AlertDialogOverlay`,Kt=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(N,{...i,...r,ref:t})});Kt.displayName=Gt;var $=`AlertDialogContent`,[qt,Jt]=Rt($),Yt=b(`AlertDialogContent`),Xt=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,children:r,...i}=e,a=Q(n),o=F.useRef(null),s=c(t,o),l=F.useRef(null);return(0,K.jsx)(j,{contentName:$,titleName:Zt,docsSlug:`alert-dialog`,children:(0,K.jsx)(qt,{scope:n,cancelRef:l,children:(0,K.jsxs)(se,{role:`alertdialog`,...a,...i,ref:s,onOpenAutoFocus:y(i.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,K.jsx)(Yt,{children:r}),(0,K.jsx)(on,{contentRef:o})]})})})});Xt.displayName=$;var Zt=`AlertDialogTitle`,Qt=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(ie,{...i,...r,ref:t})});Qt.displayName=Zt;var $t=`AlertDialogDescription`,en=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(M,{...i,...r,ref:t})});en.displayName=$t;var tn=`AlertDialogAction`,nn=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(P,{...i,...r,ref:t})});nn.displayName=tn;var rn=`AlertDialogCancel`,an=F.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=Jt(rn,n),a=Q(n),o=c(t,i);return(0,K.jsx)(P,{...a,...r,ref:o})});an.displayName=rn;var on=({contentRef:e})=>{let t=`\`${$}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$}\` by passing a \`${$t}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return F.useEffect(()=>{document.getElementById(e.current?.getAttribute(`aria-describedby`))||console.warn(t)},[t,e]),null},sn=Bt,cn=Ht,ln=Wt,un=Kt,dn=Xt,fn=nn,pn=an,mn=Qt,hn=en;function gn({...e}){return(0,K.jsx)(sn,{"data-slot":`alert-dialog`,...e})}function _n({...e}){return(0,K.jsx)(cn,{"data-slot":`alert-dialog-trigger`,...e})}function vn({...e}){return(0,K.jsx)(ln,{"data-slot":`alert-dialog-portal`,...e})}function yn({className:e,...t}){return(0,K.jsx)(un,{"data-slot":`alert-dialog-overlay`,className:u(`data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50`,e),...t})}function bn({className:e,...t}){return(0,K.jsxs)(vn,{children:[(0,K.jsx)(yn,{}),(0,K.jsx)(dn,{"data-slot":`alert-dialog-content`,className:u(`bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg`,e),...t})]})}function xn({className:e,...t}){return(0,K.jsx)(`div`,{"data-slot":`alert-dialog-header`,className:u(`flex flex-col gap-2 text-center sm:text-left`,e),...t})}function Sn({className:e,...t}){return(0,K.jsx)(`div`,{"data-slot":`alert-dialog-footer`,className:u(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,e),...t})}function Cn({className:e,...t}){return(0,K.jsx)(mn,{"data-slot":`alert-dialog-title`,className:u(`text-lg font-semibold`,e),...t})}function wn({className:e,...t}){return(0,K.jsx)(hn,{"data-slot":`alert-dialog-description`,className:u(`text-muted-foreground text-sm`,e),...t})}function Tn({className:e,variant:t,...n}){return(0,K.jsx)(fn,{className:u(d({variant:t}),e),...n})}function En({className:e,...t}){return(0,K.jsx)(pn,{className:u(d({variant:`outline`}),e),...t})}function Dn(){let[e,t]=(0,F.useState)(``),[n,c]=(0,F.useState)(``),[l,u]=(0,F.useState)(``),d=(0,F.useRef)(null),m=o(e=>e.courses.currentCourseId),h=o(e=>e.modules.chapters).map(e=>({label:e.title,value:e.id})),g=a(),_=s(),v=async e=>{let t=await i.POST(`/api/v1/chapters`,{body:{title:e},params:{query:{courseId:m}}});if(!t.data)return null;let n={...t.data,id:t.data.id.toString(),modules:t.data.modules.map(e=>({...e,id:e.id.toString()}))};return g(r.addChapter(n)),t.data.id};return(0,K.jsxs)(`div`,{className:`max-w-2xl mx-auto py-8`,children:[(0,K.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Create New Module`}),(0,K.jsxs)(`form`,{className:`space-y-6`,onSubmit:async t=>{t.preventDefault(),t.stopPropagation();let a=d.current?.getHtmlContent();if(!a){window.alert(`Please enter content for the module.`);return}let o=null;l&&(o=await v(l));let s=await i.POST(`/api/v1/modules`,{body:{title:e,content:a},params:{query:{chapterId:parseInt(n)||o}}});s.data&&(g(r.setChapterModules({chapterId:s.data.chapterId.toString(),modules:s.data.modules.map(e=>({...e,id:e.id.toString()}))})),_(-1))},children:[(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{htmlFor:`module-title`,className:`block font-medium mb-1`,children:`Module Title`}),(0,K.jsx)(ee,{id:`module-title`,value:e,onChange:e=>t(e.target.value),placeholder:`Enter module title`})]}),(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{className:`block font-medium mb-1`,children:`Chapter`}),(0,K.jsx)(It,{options:h,placeholder:(0,K.jsx)(`span`,{className:`text-muted-foreground font-normal`,children:`Select chapter…`}),onSelect:e=>{u(``),c(e)},onShouldCreate:e=>{u(e),c(``)}}),l&&(0,K.jsxs)(`p`,{className:`mt-1 text-sm text-muted-foreground`,children:[`A new chapter “`,l,`” will be created once you save the module.`]})]}),(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{className:`block font-medium mb-1`,children:`Content`}),(0,K.jsx)(p,{ref:d})]}),(0,K.jsxs)(`div`,{className:`flex gap-2 mt-4`,children:[(0,K.jsx)(f,{type:`submit`,children:`Save Module`}),(0,K.jsxs)(gn,{children:[(0,K.jsx)(_n,{asChild:!0,children:(0,K.jsx)(f,{type:`button`,variant:`outline`,children:`Cancel`})}),(0,K.jsxs)(bn,{children:[(0,K.jsxs)(xn,{children:[(0,K.jsx)(Cn,{children:`Cancel Module Creation?`}),(0,K.jsx)(wn,{children:`Are you sure you want to cancel? Unsaved changes will be lost.`})]}),(0,K.jsxs)(Sn,{children:[(0,K.jsx)(En,{children:`Go Back`}),(0,K.jsx)(Tn,{variant:`destructive`,onClick:()=>_(-1),children:`Yes, Cancel`})]})]})]})]})]})]})}const On=Dn;export{On as Component};