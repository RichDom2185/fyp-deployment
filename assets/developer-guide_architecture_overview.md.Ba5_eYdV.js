import{_ as a,c as i,o as n,ah as e}from"./chunks/framework.BedXB533.js";const c=JSON.parse('{"title":"System Overview","description":"","frontmatter":{},"headers":[],"relativePath":"developer-guide/architecture/overview.md","filePath":"developer-guide/architecture/overview.md"}'),t={name:"developer-guide/architecture/overview.md"};function l(p,s,r,h,o,k){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="system-overview" tabindex="-1">System Overview <a class="header-anchor" href="#system-overview" aria-label="Permalink to “System Overview”">​</a></h1><p>This document provides a high-level overview of the LMS architecture, design patterns, and system components.</p><h2 id="architecture-diagram" tabindex="-1">Architecture Diagram <a class="header-anchor" href="#architecture-diagram" aria-label="Permalink to “Architecture Diagram”">​</a></h2><h2 id="architectural-style" tabindex="-1">Architectural Style <a class="header-anchor" href="#architectural-style" aria-label="Permalink to “Architectural Style”">​</a></h2><p>The LMS follows a <strong>three-tier architecture</strong> with clear separation of concerns:</p><ol><li><strong>Presentation Layer</strong> - React frontend</li><li><strong>Application Layer</strong> - Express backend API</li><li><strong>Data Layer</strong> - PostgreSQL database with TypeORM</li></ol><p>Additionally, <strong>serverless functions</strong> on Cloudflare Workers handle specific edge computing tasks.</p><h2 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to “Core Components”">​</a></h2><h3 id="frontend-client-application" tabindex="-1">Frontend (Client Application) <a class="header-anchor" href="#frontend-client-application" aria-label="Permalink to “Frontend (Client Application)”">​</a></h3><p><strong>Technology</strong>: React 19 + TypeScript + Vite</p><p><strong>Responsibilities</strong>:</p><ul><li>User interface rendering</li><li>Client-side routing</li><li>State management (Redux + TanStack Query)</li><li>Form handling and validation</li><li>Real-time updates</li><li>API communication</li></ul><p><strong>Architecture Pattern</strong>: Component-based architecture with hooks</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Frontend Architecture:</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│         React Application           │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Pages &amp; Routing             │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Components (UI)             │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   State Management            │  │</span></span>
<span class="line"><span>│  │   (Redux + React Query)       │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   API Client (@repo/api)      │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre></div><h3 id="backend-api-server" tabindex="-1">Backend (API Server) <a class="header-anchor" href="#backend-api-server" aria-label="Permalink to “Backend (API Server)”">​</a></h3><p><strong>Technology</strong>: Express 5 + TypeORM + TSOA</p><p><strong>Responsibilities</strong>:</p><ul><li>RESTful API endpoints</li><li>Business logic execution</li><li>Data validation</li><li>Authentication &amp; authorization</li><li>Database operations</li><li>Integration with external services</li><li>OpenAPI specification generation</li></ul><p><strong>Architecture Pattern</strong>: Layered architecture (Controller → Service → Repository)</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Backend Architecture:</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│      Express API Server             │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Controllers (TSOA)          │  │</span></span>
<span class="line"><span>│  │   - Route handlers            │  │</span></span>
<span class="line"><span>│  │   - Request validation        │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Services                    │  │</span></span>
<span class="line"><span>│  │   - Business logic            │  │</span></span>
<span class="line"><span>│  │   - Orchestration             │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Integrations                │  │</span></span>
<span class="line"><span>│  │   - External services         │  │</span></span>
<span class="line"><span>│  │   - Gateways                  │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   TypeORM Entities            │  │</span></span>
<span class="line"><span>│  │   - Data models               │  │</span></span>
<span class="line"><span>│  │   - Relationships             │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span>
<span class="line"><span>            ↓</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│      PostgreSQL Database            │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre></div><h3 id="cloud-functions" tabindex="-1">Cloud Functions <a class="header-anchor" href="#cloud-functions" aria-label="Permalink to “Cloud Functions”">​</a></h3><p><strong>Technology</strong>: Hono + Cloudflare Workers</p><p><strong>Responsibilities</strong>:</p><ul><li>Edge computing tasks</li><li>File processing</li><li>Lightweight API endpoints</li><li>JWT operations</li><li>Utility functions</li></ul><p><strong>Architecture Pattern</strong>: Function-as-a-Service (FaaS)</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Cloud Functions Architecture:</span></span>
<span class="line"><span>┌─────────────────────────────────────┐</span></span>
<span class="line"><span>│   Cloudflare Workers (Edge)         │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Hono Router                 │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Functions                   │  │</span></span>
<span class="line"><span>│  │   - File operations           │  │</span></span>
<span class="line"><span>│  │   - JWT utilities             │  │</span></span>
<span class="line"><span>│  │   - Data processing           │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>│  ┌───────────────────────────────┐  │</span></span>
<span class="line"><span>│  │   Middleware                  │  │</span></span>
<span class="line"><span>│  │   - Auth                      │  │</span></span>
<span class="line"><span>│  │   - CORS                      │  │</span></span>
<span class="line"><span>│  └───────────────────────────────┘  │</span></span>
<span class="line"><span>└─────────────────────────────────────┘</span></span></code></pre></div><h3 id="database" tabindex="-1">Database <a class="header-anchor" href="#database" aria-label="Permalink to “Database”">​</a></h3><p><strong>Technology</strong>: PostgreSQL + TypeORM</p><p><strong>Key Entities</strong>:</p><ul><li>User, OAuthCredential</li><li>Course, Module, Chapter</li><li>CourseFile, CourseFileMetadata</li><li>Quiz, QuizQuestion, QuizAttempt, QuizResponse</li><li>Assignment (planned)</li><li>Discussion, DiscussionComment</li><li>Conversation, Message</li><li>Calendar, CalendarEvent</li><li>Membership, Role, Permission</li><li>ContentActivity, ChatActivity (analytics)</li></ul><p><strong>Relationships</strong>: Complex many-to-many and one-to-many relationships with proper foreign keys</p><h2 id="design-patterns" tabindex="-1">Design Patterns <a class="header-anchor" href="#design-patterns" aria-label="Permalink to “Design Patterns”">​</a></h2><h3 id="_1-repository-pattern" tabindex="-1">1. Repository Pattern <a class="header-anchor" href="#_1-repository-pattern" aria-label="Permalink to “1. Repository Pattern”">​</a></h3><p><strong>Location</strong>: Backend with TypeORM</p><p>TypeORM repositories abstract database operations:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Entity definition</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Entity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Course</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PrimaryGeneratedColumn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OneToMany</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Module, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.course)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Usage in service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> courseRepo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dataSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Course);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> course</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> courseRepo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findOne</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  where: { id },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  relations: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;modules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_2-dependency-injection" tabindex="-1">2. Dependency Injection <a class="header-anchor" href="#_2-dependency-injection" aria-label="Permalink to “2. Dependency Injection”">​</a></h3><p><strong>Location</strong>: Backend with tsyringe</p><p>Controllers and services use dependency injection:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CourseService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DataSource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> dataSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;StorageService&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> storage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IStorageService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ) {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-factory-pattern" tabindex="-1">3. Factory Pattern <a class="header-anchor" href="#_3-factory-pattern" aria-label="Permalink to “3. Factory Pattern”">​</a></h3><p><strong>Location</strong>: Frontend API queries</p><p>Query key factories for consistent cache management:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createQueryKeyStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@lukemorales/query-key-factory&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> queries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createQueryKeyStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  courses: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    all: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    detail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [id],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [{ filters }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_4-adapter-pattern" tabindex="-1">4. Adapter Pattern <a class="header-anchor" href="#_4-adapter-pattern" aria-label="Permalink to “4. Adapter Pattern”">​</a></h3><p><strong>Location</strong>: Backend integrations</p><p>Abstract storage services with adapters:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IStorageService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uploadFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  deleteFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Firebase adapter</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FirebaseStorageService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IStorageService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Implementation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Appwrite adapter</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppwriteStorageService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IStorageService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Implementation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-middleware-pattern" tabindex="-1">5. Middleware Pattern <a class="header-anchor" href="#_5-middleware-pattern" aria-label="Permalink to “5. Middleware Pattern”">​</a></h3><p><strong>Location</strong>: Backend Express middleware</p><p>Authentication, error handling, and request processing:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Authentication middleware</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authenticate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.headers.authorization;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Verify JWT and attach user to request</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Error handling middleware</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> errorHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Centralized error handling</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="_6-observer-pattern" tabindex="-1">6. Observer Pattern <a class="header-anchor" href="#_6-observer-pattern" aria-label="Permalink to “6. Observer Pattern”">​</a></h3><p><strong>Location</strong>: Frontend with Redux and TanStack Query</p><p>State changes trigger UI updates automatically:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Component subscribes to state changes</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> courses</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useSelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state.courses);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Query subscriptions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  queryKey: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;courses&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  queryFn: fetchCourses,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to “Data Flow”">​</a></h2><h3 id="request-flow-frontend-→-backend-→-database" tabindex="-1">Request Flow (Frontend → Backend → Database) <a class="header-anchor" href="#request-flow-frontend-→-backend-→-database" aria-label="Permalink to “Request Flow (Frontend → Backend → Database)”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>User Action</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>React Component</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>TanStack Query Hook</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>API Client (@repo/api)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>HTTP Request</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Express Server</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Controller (TSOA)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Service Layer</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>TypeORM Repository</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>PostgreSQL Database</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Response (reverse path)</span></span></code></pre></div><h3 id="type-flow" tabindex="-1">Type Flow <a class="header-anchor" href="#type-flow" aria-label="Permalink to “Type Flow”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Database Entity</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>TypeORM Entity Decorator</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>TSOA Controller Annotations</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>OpenAPI Specification (swagger.json)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>openapi-typescript Generator</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>TypeScript Types (api.gen.ts)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Frontend Components (type-safe!)</span></span></code></pre></div><p>See <a href="./type-safety.html">Type Safety Flow</a> for detailed information.</p><h2 id="communication-patterns" tabindex="-1">Communication Patterns <a class="header-anchor" href="#communication-patterns" aria-label="Permalink to “Communication Patterns”">​</a></h2><h3 id="_1-restful-api" tabindex="-1">1. RESTful API <a class="header-anchor" href="#_1-restful-api" aria-label="Permalink to “1. RESTful API”">​</a></h3><p>Primary communication between frontend and backend:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>GET    /api/courses          - List courses</span></span>
<span class="line"><span>GET    /api/courses/:id      - Get course details</span></span>
<span class="line"><span>POST   /api/courses          - Create course</span></span>
<span class="line"><span>PUT    /api/courses/:id      - Update course</span></span>
<span class="line"><span>DELETE /api/courses/:id      - Delete course</span></span></code></pre></div><h3 id="_2-authentication-flow" tabindex="-1">2. Authentication Flow <a class="header-anchor" href="#_2-authentication-flow" aria-label="Permalink to “2. Authentication Flow”">​</a></h3><p>JWT-based authentication:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>1. User logs in with credentials</span></span>
<span class="line"><span>2. Backend validates and generates JWT</span></span>
<span class="line"><span>3. Frontend stores JWT (localStorage/Redux)</span></span>
<span class="line"><span>4. Frontend includes JWT in Authorization header</span></span>
<span class="line"><span>5. Backend middleware validates JWT on each request</span></span>
<span class="line"><span>6. User context attached to request</span></span></code></pre></div><h3 id="_3-real-time-updates-planned" tabindex="-1">3. Real-time Updates (Planned) <a class="header-anchor" href="#_3-real-time-updates-planned" aria-label="Permalink to “3. Real-time Updates (Planned)”">​</a></h3><p>For features requiring real-time updates:</p><ul><li>WebSocket connections</li><li>Server-Sent Events (SSE)</li><li>Polling with TanStack Query</li></ul><h2 id="scalability-considerations" tabindex="-1">Scalability Considerations <a class="header-anchor" href="#scalability-considerations" aria-label="Permalink to “Scalability Considerations”">​</a></h2><h3 id="horizontal-scaling" tabindex="-1">Horizontal Scaling <a class="header-anchor" href="#horizontal-scaling" aria-label="Permalink to “Horizontal Scaling”">​</a></h3><ul><li><strong>Frontend</strong>: Static assets served via CDN</li><li><strong>Backend</strong>: Stateless API servers behind load balancer</li><li><strong>Database</strong>: Read replicas for scaling reads</li><li><strong>Cloud Functions</strong>: Auto-scaling edge functions</li></ul><h3 id="caching-strategy" tabindex="-1">Caching Strategy <a class="header-anchor" href="#caching-strategy" aria-label="Permalink to “Caching Strategy”">​</a></h3><p><strong>Frontend Caching</strong>:</p><ul><li>TanStack Query cache for API responses</li><li>Redux persist for application state</li><li>Browser cache for static assets</li></ul><p><strong>Backend Caching</strong>:</p><ul><li>Database query caching</li><li>Redis for session storage (planned)</li><li>Response caching for expensive operations</li></ul><h3 id="performance-optimization" tabindex="-1">Performance Optimization <a class="header-anchor" href="#performance-optimization" aria-label="Permalink to “Performance Optimization”">​</a></h3><ul><li>Code splitting in frontend (React.lazy)</li><li>Database indexing on frequently queried fields</li><li>Pagination for large data sets</li><li>Lazy loading of related entities</li><li>Asset optimization (images, bundles)</li></ul><h2 id="security-architecture" tabindex="-1">Security Architecture <a class="header-anchor" href="#security-architecture" aria-label="Permalink to “Security Architecture”">​</a></h2><h3 id="authentication" tabindex="-1">Authentication <a class="header-anchor" href="#authentication" aria-label="Permalink to “Authentication”">​</a></h3><ul><li>JWT-based authentication</li><li>OAuth 2.0 for third-party providers (Google, etc.)</li><li>Argon2 password hashing</li><li>JWKS for token verification</li></ul><h3 id="authorization" tabindex="-1">Authorization <a class="header-anchor" href="#authorization" aria-label="Permalink to “Authorization”">​</a></h3><ul><li>Role-based access control (RBAC)</li><li>Permission system for fine-grained control</li><li>Course-level memberships</li><li>Middleware guards on API routes</li></ul><h3 id="data-protection" tabindex="-1">Data Protection <a class="header-anchor" href="#data-protection" aria-label="Permalink to “Data Protection”">​</a></h3><ul><li>HTTPS/TLS for all communications</li><li>SQL injection prevention (TypeORM parameterized queries)</li><li>XSS protection (React auto-escaping)</li><li>CSRF protection</li><li>Input validation and sanitization</li></ul><h3 id="security-headers" tabindex="-1">Security Headers <a class="header-anchor" href="#security-headers" aria-label="Permalink to “Security Headers”">​</a></h3><ul><li>CORS configuration</li><li>Content Security Policy (CSP)</li><li>X-Frame-Options</li><li>X-Content-Type-Options</li></ul><h2 id="monitoring-and-observability" tabindex="-1">Monitoring and Observability <a class="header-anchor" href="#monitoring-and-observability" aria-label="Permalink to “Monitoring and Observability”">​</a></h2><h3 id="logging" tabindex="-1">Logging <a class="header-anchor" href="#logging" aria-label="Permalink to “Logging”">​</a></h3><ul><li>Structured logging with Pino</li><li>Request/response logging</li><li>Error logging with stack traces</li><li>Audit logs for sensitive operations</li></ul><h3 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to “Error Handling”">​</a></h3><ul><li>Centralized error handling middleware</li><li>Custom error classes for different scenarios</li><li>User-friendly error messages</li><li>Detailed error logs for debugging</li></ul><h3 id="performance-monitoring" tabindex="-1">Performance Monitoring <a class="header-anchor" href="#performance-monitoring" aria-label="Permalink to “Performance Monitoring”">​</a></h3><ul><li>API response time tracking</li><li>Database query performance</li><li>Frontend render performance</li><li>Resource utilization metrics</li></ul><h2 id="development-principles" tabindex="-1">Development Principles <a class="header-anchor" href="#development-principles" aria-label="Permalink to “Development Principles”">​</a></h2><h3 id="type-safety" tabindex="-1">Type Safety <a class="header-anchor" href="#type-safety" aria-label="Permalink to “Type Safety”">​</a></h3><ul><li>TypeScript strict mode throughout</li><li>No <code>any</code> types without justification</li><li>End-to-end type safety</li><li>Compile-time error detection</li></ul><h3 id="code-quality" tabindex="-1">Code Quality <a class="header-anchor" href="#code-quality" aria-label="Permalink to “Code Quality”">​</a></h3><ul><li>ESLint for code linting</li><li>Prettier for formatting</li><li>Comprehensive testing</li><li>Code reviews</li><li>Consistent coding standards</li></ul><h3 id="modularity" tabindex="-1">Modularity <a class="header-anchor" href="#modularity" aria-label="Permalink to “Modularity”">​</a></h3><ul><li>Monorepo structure</li><li>Shared packages</li><li>Clear separation of concerns</li><li>Reusable components and utilities</li></ul><h3 id="developer-experience" tabindex="-1">Developer Experience <a class="header-anchor" href="#developer-experience" aria-label="Permalink to “Developer Experience”">​</a></h3><ul><li>Fast hot reload</li><li>Automated code generation</li><li>Clear error messages</li><li>Comprehensive documentation</li><li>Helpful tooling</li></ul><h2 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to “Future Enhancements”">​</a></h2><p>Potential architectural improvements:</p><ul><li><strong>Microservices</strong>: Split backend into domain-specific services</li><li><strong>Message Queue</strong>: RabbitMQ/Redis for async processing</li><li><strong>GraphQL</strong>: Alternative to REST API</li><li><strong>Real-time</strong>: WebSocket server for live updates</li><li><strong>Caching Layer</strong>: Redis for distributed caching</li><li><strong>Search Engine</strong>: Elasticsearch for full-text search</li><li><strong>Event Sourcing</strong>: For audit trails and analytics</li></ul><h2 id="related-documentation" tabindex="-1">Related Documentation <a class="header-anchor" href="#related-documentation" aria-label="Permalink to “Related Documentation”">​</a></h2><ul><li><a href="./type-safety.html">Type Safety Flow</a> - Detailed type generation process</li><li><a href="./../components/frontend.html">Frontend Architecture</a> - Frontend-specific details</li><li><a href="./../components/backend.html">Backend Architecture</a> - Backend-specific details</li><li><a href="./../packages/db.html">Database Package</a> - Database schema and entities</li></ul>`,112)])])}const g=a(t,[["render",l]]);export{c as __pageData,g as default};
