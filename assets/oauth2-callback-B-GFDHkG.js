import{K as e,T as t,Z as n,_ as r,d as i,f as a,i as o,n as s,o as c,u as l,y as u}from"./index-De71N5Dy.js";import{t as d}from"./utils-BVdesv7M.js";import{t as f}from"./button-DPMtwoy8.js";import{t as p}from"./createLucideIcon-UCLnlboM.js";var m=p(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),h=p(`loader-pinwheel`,[[`path`,{d:`M22 12a1 1 0 0 1-10 0 1 1 0 0 0-10 0`,key:`1lzz15`}],[`path`,{d:`M7 20.7a1 1 0 1 1 5-8.7 1 1 0 1 0 5-8.6`,key:`1gnrpi`}],[`path`,{d:`M7 3.3a1 1 0 1 1 5 8.6 1 1 0 1 0 5 8.6`,key:`u9yy5q`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),g=p(`loader`,[[`path`,{d:`M12 2v4`,key:`3427ic`}],[`path`,{d:`m16.2 7.8 2.9-2.9`,key:`r700ao`}],[`path`,{d:`M18 12h4`,key:`wj9ykh`}],[`path`,{d:`m16.2 16.2 2.9 2.9`,key:`1bxg5t`}],[`path`,{d:`M12 18v4`,key:`jadmvz`}],[`path`,{d:`m4.9 19.1 2.9-2.9`,key:`bwix9q`}],[`path`,{d:`M2 12h4`,key:`j09sii`}],[`path`,{d:`m4.9 4.9 2.9 2.9`,key:`giyufr`}]]),_=n(e()),v=n(t()),y=({className:e,...t})=>(0,v.jsx)(g,{className:d(`animate-spin`,e),...t}),b=({className:e,...t})=>(0,v.jsx)(m,{className:d(`animate-spin`,e),...t}),x=({className:e,...t})=>(0,v.jsx)(h,{className:d(`animate-spin`,e),...t}),S=({className:e,size:t=24,...n})=>(0,v.jsxs)(`div`,{className:`relative`,style:{width:t,height:t},children:[(0,v.jsx)(`div`,{className:`absolute inset-0 rotate-180`,children:(0,v.jsx)(m,{className:d(`animate-spin`,e,`text-foreground opacity-20`),size:t,...n})}),(0,v.jsx)(m,{className:d(`relative animate-spin`,e),size:t,...n})]}),C=({size:e=24,...t})=>(0,v.jsxs)(`svg`,{height:e,viewBox:`0 0 24 24`,width:e,xmlns:`http://www.w3.org/2000/svg`,...t,children:[(0,v.jsx)(`title`,{children:`Loading...`}),(0,v.jsx)(`circle`,{cx:`4`,cy:`12`,fill:`currentColor`,r:`2`,children:(0,v.jsx)(`animate`,{attributeName:`cy`,begin:`0;ellipsis3.end+0.25s`,calcMode:`spline`,dur:`0.6s`,id:`ellipsis1`,keySplines:`.33,.66,.66,1;.33,0,.66,.33`,values:`12;6;12`})}),(0,v.jsx)(`circle`,{cx:`12`,cy:`12`,fill:`currentColor`,r:`2`,children:(0,v.jsx)(`animate`,{attributeName:`cy`,begin:`ellipsis1.begin+0.1s`,calcMode:`spline`,dur:`0.6s`,keySplines:`.33,.66,.66,1;.33,0,.66,.33`,values:`12;6;12`})}),(0,v.jsx)(`circle`,{cx:`20`,cy:`12`,fill:`currentColor`,r:`2`,children:(0,v.jsx)(`animate`,{attributeName:`cy`,begin:`ellipsis1.begin+0.2s`,calcMode:`spline`,dur:`0.6s`,id:`ellipsis3`,keySplines:`.33,.66,.66,1;.33,0,.66,.33`,values:`12;6;12`})})]}),w=({size:e=24,...t})=>(0,v.jsxs)(`svg`,{height:e,stroke:`currentColor`,viewBox:`0 0 44 44`,width:e,xmlns:`http://www.w3.org/2000/svg`,...t,children:[(0,v.jsx)(`title`,{children:`Loading...`}),(0,v.jsxs)(`g`,{fill:`none`,fillRule:`evenodd`,strokeWidth:`2`,children:[(0,v.jsxs)(`circle`,{cx:`22`,cy:`22`,r:`1`,children:[(0,v.jsx)(`animate`,{attributeName:`r`,begin:`0s`,calcMode:`spline`,dur:`1.8s`,keySplines:`0.165, 0.84, 0.44, 1`,keyTimes:`0; 1`,repeatCount:`indefinite`,values:`1; 20`}),(0,v.jsx)(`animate`,{attributeName:`stroke-opacity`,begin:`0s`,calcMode:`spline`,dur:`1.8s`,keySplines:`0.3, 0.61, 0.355, 1`,keyTimes:`0; 1`,repeatCount:`indefinite`,values:`1; 0`})]}),(0,v.jsxs)(`circle`,{cx:`22`,cy:`22`,r:`1`,children:[(0,v.jsx)(`animate`,{attributeName:`r`,begin:`-0.9s`,calcMode:`spline`,dur:`1.8s`,keySplines:`0.165, 0.84, 0.44, 1`,keyTimes:`0; 1`,repeatCount:`indefinite`,values:`1; 20`}),(0,v.jsx)(`animate`,{attributeName:`stroke-opacity`,begin:`-0.9s`,calcMode:`spline`,dur:`1.8s`,keySplines:`0.3, 0.61, 0.355, 1`,keyTimes:`0; 1`,repeatCount:`indefinite`,values:`1; 0`})]})]})]}),T=({size:e=24,...t})=>(0,v.jsxs)(`svg`,{height:e,viewBox:`0 0 24 24`,width:e,xmlns:`http://www.w3.org/2000/svg`,...t,children:[(0,v.jsx)(`title`,{children:`Loading...`}),(0,v.jsx)(`style`,{children:`
      .spinner-bar {
        animation: spinner-bars-animation .8s linear infinite;
        animation-delay: -.8s;
      }
      .spinner-bars-2 {
        animation-delay: -.65s;
      }
      .spinner-bars-3 {
        animation-delay: -0.5s;
      }
      @keyframes spinner-bars-animation {
        0% {
          y: 1px;
          height: 22px;
        }
        93.75% {
          y: 5px;
          height: 14px;
          opacity: 0.2;
        }
      }
    `}),(0,v.jsx)(`rect`,{className:`spinner-bar`,fill:`currentColor`,height:`22`,width:`6`,x:`1`,y:`1`}),(0,v.jsx)(`rect`,{className:`spinner-bar spinner-bars-2`,fill:`currentColor`,height:`22`,width:`6`,x:`9`,y:`1`}),(0,v.jsx)(`rect`,{className:`spinner-bar spinner-bars-3`,fill:`currentColor`,height:`22`,width:`6`,x:`17`,y:`1`})]}),E=({size:e=24,...t})=>(0,v.jsxs)(`svg`,{height:e,preserveAspectRatio:`xMidYMid`,viewBox:`0 0 100 100`,width:e,xmlns:`http://www.w3.org/2000/svg`,...t,children:[(0,v.jsx)(`title`,{children:`Loading...`}),(0,v.jsx)(`path`,{d:`M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z`,fill:`none`,stroke:`currentColor`,strokeDasharray:`205.271142578125 51.317785644531256`,strokeLinecap:`round`,strokeWidth:`10`,style:{transform:`scale(0.8)`,transformOrigin:`50px 50px`},children:(0,v.jsx)(`animate`,{attributeName:`stroke-dashoffset`,dur:`2s`,keyTimes:`0;1`,repeatCount:`indefinite`,values:`0;256.58892822265625`})})]});const D=({variant:e,...t})=>{switch(e){case`circle`:return(0,v.jsx)(b,{...t});case`pinwheel`:return(0,v.jsx)(x,{...t});case`circle-filled`:return(0,v.jsx)(S,{...t});case`ellipsis`:return(0,v.jsx)(C,{...t});case`ring`:return(0,v.jsx)(w,{...t});case`bars`:return(0,v.jsx)(T,{...t});case`infinite`:return(0,v.jsx)(E,{...t});default:return(0,v.jsx)(y,{...t})}};function O(){let e=r(),t=u(),n=c(),d=new URLSearchParams(e.search),p=d.get(`code`),m=d.get(`provider_id`);return(0,_.useEffect)(()=>{if(!p||!m)return;let e=new AbortController;return(async()=>{try{let r=await s.POST(`/api/v1/auth/oauth2/callback`,{signal:e.signal,body:{code:p,provider:m,redirectUri:`${window.location.origin}/oauth2-callback?provider_id=${m}`}});if(r.error)throw Error(`OAuth2 login failed`);r.data&&(i.success(`Login successful`),n(l.setTokens(r.data)),t(`/dashboard`))}catch{if(e.signal.aborted)return;i.error(`OAuth2 login failed. Please try again.`)}})(),()=>{e.abort()}},[p,n,t,m]),!p||!m?(0,v.jsx)(`div`,{className:`flex h-screen w-screen items-center justify-center bg-gray-100`,children:(0,v.jsxs)(`div`,{className:`space-y-4 text-center w-80`,children:[(0,v.jsx)(`p`,{className:`text-gray-500`,children:`Social login failed. Please try again.`}),(0,v.jsx)(f,{asChild:!0,className:`w-full`,children:(0,v.jsx)(a,{to:`/login`,children:`Back to Login`})})]})}):(0,v.jsx)(`div`,{className:`flex h-screen w-screen items-center justify-center bg-gray-100`,children:(0,v.jsxs)(`div`,{className:`space-y-4 text-center w-80`,children:[(0,v.jsxs)(`p`,{className:`text-gray-500`,children:[`Signing in with `,o[m]?.name||`social login`,`â€¦`]}),(0,v.jsx)(D,{className:`w-full`})]})})}const k=O;export{k as Component};