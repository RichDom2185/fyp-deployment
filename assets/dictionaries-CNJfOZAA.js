import{t as e}from"./hooks-BAT23hyk.js";import{K as t,T as n,Z as r,f as i,s as a,t as o}from"./index-Ra2lGJdp.js";import{t as s}from"./button-ZbUugITV.js";import{t as c}from"./book-open-qabwlNTo.js";import{a as l,i as u,n as d,r as f,t as p}from"./select-B5CW39xL.js";import{n as m,t as h}from"./graduation-cap-CjRVFkYD.js";import{t as g}from"./pencil-BtoSBbQo.js";import{t as _}from"./plus-DHQX-CAp.js";import{t as v}from"./search-BrWw_GdR.js";import{t as y}from"./input-DWGpcTdi.js";import"./es2015-B0iSd3k2.js";import{a as b,i as x,o as S,r as C,s as w,t as T}from"./dialog-ZgoMsabM.js";import{t as E}from"./label-qYupBdTo.js";import{a as D,n as O,o as k,t as A}from"./card-DzwWgtAJ.js";import{t as j}from"./badge-eeQPs6tM.js";import{t as M}from"./textarea-DtcNrsDH.js";import{a as N,i as P,n as F}from"./dictionaries-ufZm88Z4.js";var I=r(t()),L=r(n());function R({open:e,onOpenChange:t,onSuccess:n}){let r=a(e=>e.courses.currentCourseId),[i,o]=(0,I.useState)(``),[c,m]=(0,I.useState)(``),[h,g]=(0,I.useState)(`custom`),[_,v]=(0,I.useState)(`en`),[D,O]=(0,I.useState)(`course`),k=F({onSuccess:()=>{o(``),m(``),g(`custom`),v(`en`),O(`course`),t(!1),n?.()}});return(0,L.jsx)(T,{open:e,onOpenChange:t,children:(0,L.jsxs)(C,{className:`sm:max-w-125`,children:[(0,L.jsxs)(S,{children:[(0,L.jsx)(w,{children:`Create Dictionary`}),(0,L.jsx)(x,{children:`Create a new dictionary for managing terminology and translations.`})]}),(0,L.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),k.mutate({name:i,description:c,type:h,language:_,scope:D,courseId:D===`course`?r:void 0})},className:`space-y-4`,children:[(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`name`,children:`Name`}),(0,L.jsx)(y,{id:`name`,placeholder:`e.g., Singlish Dictionary`,value:i,onChange:e=>o(e.target.value),required:!0})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`description`,children:`Description`}),(0,L.jsx)(M,{id:`description`,placeholder:`Describe the purpose of this dictionary...`,value:c,onChange:e=>m(e.target.value)})]}),(0,L.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`type`,children:`Type`}),(0,L.jsxs)(p,{value:h,onValueChange:e=>g(e),children:[(0,L.jsx)(u,{id:`type`,children:(0,L.jsx)(l,{placeholder:`Select type`})}),(0,L.jsxs)(d,{children:[(0,L.jsx)(f,{value:`dialect`,children:`Dialect`}),(0,L.jsx)(f,{value:`domain`,children:`Domain-specific`}),(0,L.jsx)(f,{value:`custom`,children:`Custom`})]})]})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`scope`,children:`Scope`}),(0,L.jsxs)(p,{value:D,onValueChange:e=>O(e),children:[(0,L.jsx)(u,{id:`scope`,children:(0,L.jsx)(l,{placeholder:`Select scope`})}),(0,L.jsxs)(d,{children:[(0,L.jsx)(f,{value:`course`,children:`Course-specific`}),(0,L.jsx)(f,{value:`global`,children:`Global (all courses)`})]})]})]})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`language`,children:`Language`}),(0,L.jsx)(y,{id:`language`,placeholder:`e.g., en, zh, ta`,value:_,onChange:e=>v(e.target.value)})]}),(0,L.jsxs)(b,{children:[(0,L.jsx)(s,{type:`button`,variant:`outline`,onClick:()=>t(!1),children:`Cancel`}),(0,L.jsx)(s,{type:`submit`,disabled:k.isPending,children:k.isPending?`Creating...`:`Create Dictionary`})]})]})]})})}var z=R;function B({dictionary:e,courseId:t,entryCount:n,onEdit:r}){let a=e.scope===`global`?(0,L.jsx)(m,{className:`h-4 w-4`}):(0,L.jsx)(h,{className:`h-4 w-4`}),o=e.scope===`global`?`Global`:`Course`;return(0,L.jsxs)(A,{className:`hover:shadow-md transition-shadow`,children:[(0,L.jsx)(D,{className:`pb-3`,children:(0,L.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,L.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,L.jsx)(`div`,{className:`p-2 bg-primary/10 rounded-lg`,children:(0,L.jsx)(c,{className:`h-5 w-5 text-primary`})}),(0,L.jsxs)(`div`,{children:[(0,L.jsx)(k,{className:`text-lg font-semibold`,children:e.name}),(0,L.jsxs)(`div`,{className:`flex items-center gap-2 mt-1`,children:[(0,L.jsxs)(j,{variant:`outline`,className:`text-xs`,children:[a,(0,L.jsx)(`span`,{className:`ml-1`,children:o})]}),(0,L.jsx)(j,{variant:`secondary`,className:`text-xs`,children:e.type}),(0,L.jsx)(j,{variant:`secondary`,className:`text-xs`,children:e.language})]})]})]}),r&&(0,L.jsx)(s,{variant:`ghost`,size:`icon`,onClick:r,className:`h-8 w-8`,children:(0,L.jsx)(g,{className:`h-4 w-4`})})]})}),(0,L.jsxs)(O,{children:[e.description&&(0,L.jsx)(`p`,{className:`text-sm text-muted-foreground mb-4 line-clamp-2`,children:e.description}),(0,L.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,L.jsx)(`span`,{className:`text-sm text-muted-foreground`,children:n===void 0?`Loading...`:`${n} entries`}),(0,L.jsx)(i,{to:`/courses/${t}/dictionaries/${e.id}`,children:(0,L.jsx)(j,{variant:`outline`,className:`cursor-pointer hover:bg-accent`,children:`View Details`})})]})]})]})}var V=B;function H({open:e,onOpenChange:t,dictionary:n,onSuccess:r}){let[i,a]=(0,I.useState)(n.name),[o,c]=(0,I.useState)(n.description??``),[m,h]=(0,I.useState)(n.type),[g,_]=(0,I.useState)(n.language),[v,D]=(0,I.useState)(n.scope),[O,k]=(0,I.useState)(n.isEnabled),A=N({onSuccess:()=>{t(!1),r?.()}}),j=P({onSuccess:()=>{t(!1),r?.()}});return(0,L.jsx)(T,{open:e,onOpenChange:t,children:(0,L.jsxs)(C,{className:`sm:max-w-125`,children:[(0,L.jsxs)(S,{children:[(0,L.jsx)(w,{children:`Edit Dictionary`}),(0,L.jsx)(x,{children:`Update the dictionary details or delete it entirely.`})]}),(0,L.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),A.mutate({dictionaryId:n.id,name:i,description:o||void 0,type:m,language:g,scope:v,isEnabled:O})},className:`space-y-4`,children:[(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`name`,children:`Name`}),(0,L.jsx)(y,{id:`name`,placeholder:`e.g., Singlish Dictionary`,value:i,onChange:e=>a(e.target.value),required:!0})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`description`,children:`Description`}),(0,L.jsx)(M,{id:`description`,placeholder:`Describe the purpose of this dictionary...`,value:o,onChange:e=>c(e.target.value)})]}),(0,L.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`type`,children:`Type`}),(0,L.jsxs)(p,{value:m,onValueChange:e=>h(e),children:[(0,L.jsx)(u,{id:`type`,children:(0,L.jsx)(l,{placeholder:`Select type`})}),(0,L.jsxs)(d,{children:[(0,L.jsx)(f,{value:`dialect`,children:`Dialect`}),(0,L.jsx)(f,{value:`domain`,children:`Domain-specific`}),(0,L.jsx)(f,{value:`custom`,children:`Custom`})]})]})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`scope`,children:`Scope`}),(0,L.jsxs)(p,{value:v,onValueChange:e=>D(e),children:[(0,L.jsx)(u,{id:`scope`,children:(0,L.jsx)(l,{placeholder:`Select scope`})}),(0,L.jsxs)(d,{children:[(0,L.jsx)(f,{value:`course`,children:`Course-specific`}),(0,L.jsx)(f,{value:`global`,children:`Global (all courses)`})]})]})]})]}),(0,L.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`language`,children:`Language`}),(0,L.jsx)(y,{id:`language`,placeholder:`e.g., en, zh, ta`,value:g,onChange:e=>_(e.target.value)})]}),(0,L.jsxs)(`div`,{className:`space-y-2`,children:[(0,L.jsx)(E,{htmlFor:`isEnabled`,children:`Status`}),(0,L.jsxs)(p,{value:O?`enabled`:`disabled`,onValueChange:e=>k(e===`enabled`),children:[(0,L.jsx)(u,{id:`isEnabled`,children:(0,L.jsx)(l,{placeholder:`Select status`})}),(0,L.jsxs)(d,{children:[(0,L.jsx)(f,{value:`enabled`,children:`Enabled`}),(0,L.jsx)(f,{value:`disabled`,children:`Disabled`})]})]})]})]}),(0,L.jsxs)(b,{className:`gap-2 sm:gap-0`,children:[(0,L.jsx)(s,{type:`button`,variant:`destructive`,onClick:()=>{j.mutate(n.id)},disabled:j.isPending,className:`mr-auto`,children:j.isPending?`Deleting...`:`Delete`}),(0,L.jsxs)(`div`,{className:`flex gap-2`,children:[(0,L.jsx)(s,{type:`button`,variant:`outline`,onClick:()=>t(!1),children:`Cancel`}),(0,L.jsx)(s,{type:`submit`,disabled:A.isPending,children:A.isPending?`Saving...`:`Save Changes`})]})]})]})]})})}var U=H;function W(){let t=a(e=>e.courses.currentCourseId),[n,r]=(0,I.useState)(!1),[i,c]=(0,I.useState)(null),[l,u]=(0,I.useState)(``),{data:d=[],isLoading:f}=e({...o.dictionaries.list(t),errorMessage:`Failed to load dictionaries`,fallbackValue:[],enabled:!!t}),p=d.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.description?.toLowerCase().includes(l.toLowerCase()));return f?(0,L.jsx)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,L.jsx)(`div`,{className:`flex items-center justify-center pt-8`,children:(0,L.jsx)(`p`,{className:`text-muted-foreground`,children:`Loading dictionaries...`})})}):(0,L.jsxs)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:[(0,L.jsxs)(`div`,{className:`flex items-center justify-between sticky top-0 bg-background pt-8 pb-4 z-10`,children:[(0,L.jsx)(`div`,{className:`flex-1 max-w-md`,children:(0,L.jsxs)(`div`,{className:`relative`,children:[(0,L.jsx)(v,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground`}),(0,L.jsx)(y,{placeholder:`Search dictionaries...`,value:l,onChange:e=>u(e.target.value),className:`pl-9`})]})}),(0,L.jsxs)(s,{onClick:()=>r(!0),children:[(0,L.jsx)(_,{}),`Create Dictionary`]})]}),d.length===0?(0,L.jsx)(`div`,{className:`text-center py-12`,children:(0,L.jsx)(`p`,{className:`text-muted-foreground`,children:`No dictionaries available yet. Create one to get started.`})}):p.length===0?(0,L.jsx)(`div`,{className:`text-center py-12`,children:(0,L.jsx)(`p`,{className:`text-muted-foreground`,children:`No dictionaries match your search.`})}):(0,L.jsx)(`div`,{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-3 mt-4`,children:p.map(e=>(0,L.jsx)(V,{dictionary:e,courseId:t,onEdit:()=>c({id:e.id,name:e.name,description:e.description,type:e.type,language:e.language,scope:e.scope,isEnabled:e.isEnabled})},e.id))}),(0,L.jsx)(z,{open:n,onOpenChange:r}),i&&(0,L.jsx)(U,{open:!!i,onOpenChange:e=>!e&&c(null),dictionary:i})]})}const G=W;export{G as Component};