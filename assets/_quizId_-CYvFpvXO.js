import{K as e,T as t,Z as n,n as r,s as i,x as a,y as o}from"./index-Ra2lGJdp.js";import{t as s}from"./button-ZbUugITV.js";import{t as c}from"./createLucideIcon-D6QJSyYj.js";import{t as l}from"./chart-column-BM2R-oXQ.js";import{t as u}from"./square-pen-BzpbC4gv.js";import{a as d,n as f,o as p,t as m}from"./card-DzwWgtAJ.js";import{t as h}from"./badge-eeQPs6tM.js";var g=c(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),_=c(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),v=n(e()),y=n(t());function b({quiz:e}){return(0,y.jsxs)(m,{children:[(0,y.jsx)(d,{children:(0,y.jsx)(p,{className:`text-2xl`,children:e.title})}),(0,y.jsxs)(f,{className:`space-y-4`,children:[e.description&&(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Description`}),(0,y.jsx)(`p`,{className:`mt-1`,children:e.description})]}),(0,y.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Questions`}),(0,y.jsx)(`p`,{className:`mt-1`,children:e.questionCount??0})]}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Time Limit`}),(0,y.jsx)(`p`,{className:`mt-1`,children:e.timeLimit?`${e.timeLimit} minutes`:`No time limit`})]}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Max Attempts`}),(0,y.jsx)(`p`,{className:`mt-1`,children:e.maxAttempts?e.maxAttempts:`Unlimited`})]}),e.passingScore&&(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Passing Score`}),(0,y.jsxs)(`p`,{className:`mt-1`,children:[e.passingScore,`%`]})]})]})]})]})}var x=b;function S({attempt:e,quiz:t,showCorrectAnswers:n}){let r=e.score??0,i=e.maxScore??1,a=r/i*100,o=t.passingScore===null?!1:a>=t.passingScore;return(0,y.jsxs)(`div`,{className:`space-y-6`,children:[(0,y.jsxs)(m,{children:[(0,y.jsx)(d,{children:(0,y.jsxs)(p,{className:`flex items-center justify-between`,children:[(0,y.jsx)(`span`,{children:`Quiz Results`}),t.passingScore!==null&&(0,y.jsx)(y.Fragment,{children:o?(0,y.jsx)(h,{variant:`default`,className:`text-base`,children:`Passed`}):(0,y.jsx)(h,{variant:`destructive`,className:`text-base`,children:`Not Passed`})})]})}),(0,y.jsx)(f,{children:(0,y.jsxs)(`div`,{className:`space-y-2`,children:[(0,y.jsxs)(`div`,{className:`flex items-center justify-between text-lg`,children:[(0,y.jsx)(`span`,{className:`font-semibold`,children:`Score:`}),(0,y.jsxs)(`span`,{children:[r,` / `,i,` (`,a.toFixed(1),`%)`]})]}),e.submittedAt&&(0,y.jsxs)(`div`,{className:`text-sm text-muted-foreground`,children:[`Submitted: `,new Date(e.submittedAt).toLocaleString()]})]})})]}),n&&e.answers&&(0,y.jsxs)(`div`,{className:`space-y-4`,children:[(0,y.jsx)(`h3`,{className:`text-lg font-semibold`,children:`Answer Review`}),e.answers.map((e,t)=>(0,y.jsxs)(m,{children:[(0,y.jsx)(d,{children:(0,y.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,y.jsxs)(p,{className:`text-base`,children:[`Question `,t+1]}),(0,y.jsxs)(`div`,{className:`flex items-center gap-2`,children:[e.isCorrect!==null&&(0,y.jsx)(y.Fragment,{children:e.isCorrect?(0,y.jsx)(g,{className:`h-5 w-5 text-green-600`}):(0,y.jsx)(_,{className:`h-5 w-5 text-red-600`})}),(0,y.jsxs)(`span`,{className:`text-sm text-muted-foreground`,children:[e.pointsAwarded??0,` points`]})]})]})}),(0,y.jsxs)(f,{className:`space-y-2`,children:[(0,y.jsx)(`p`,{className:`font-medium`,children:e.questionText}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Your answer:`}),(0,y.jsx)(`p`,{className:`text-sm`,children:Array.isArray(e.answer)?e.answer.join(`, `):e.answer?.toString()??`No answer`})]}),e.correctAnswer!==void 0&&(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-sm text-muted-foreground`,children:`Correct answer:`}),(0,y.jsx)(`p`,{className:`text-sm font-medium text-green-600`,children:Array.isArray(e.correctAnswer)?e.correctAnswer.join(`, `):e.correctAnswer?.toString()??`N/A`})]})]})]},t))]})]})}var C=S;function w(){let{quizId:e}=a(),t=e?parseInt(e,10):null,n=i(e=>e.courses.currentCourseId),c=o(),[d,f]=(0,v.useState)(null),[p,m]=(0,v.useState)([]),[h,g]=(0,v.useState)(!0);(0,v.useEffect)(()=>{(async()=>{if(!(!n||!t)){g(!0);try{let[e,i]=await Promise.all([r.GET(`/api/v1/courses/{courseId}/quizzes/{quizId}`,{params:{path:{courseId:n,quizId:t}}}),r.GET(`/api/v1/courses/{courseId}/quizzes/{quizId}/my-attempts`,{params:{path:{courseId:n,quizId:t}}})]);f(e.data??null),m(i.data??[])}catch(e){console.error(`Failed to fetch quiz data:`,e)}finally{g(!1)}}})()},[n,t]);let _=async()=>{if(!(!n||!t))try{let e=await r.POST(`/api/v1/courses/{courseId}/quizzes/{quizId}/attempts`,{params:{path:{courseId:n,quizId:t}}});e.data&&c(`/courses/${n}/quizzes/${t}/attempt/${e.data.id}`)}catch(e){console.error(`Failed to start quiz:`,e)}},b=e=>{c(`/courses/${n}/quizzes/${t}/attempt/${e}`)};return h?(0,y.jsx)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,y.jsx)(`div`,{className:`flex items-center justify-center pt-8`,children:(0,y.jsx)(`p`,{className:`text-muted-foreground`,children:`Loading quiz...`})})}):d?(0,y.jsxs)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:[(0,y.jsxs)(`div`,{className:`sticky top-0 bg-background pt-8 pb-4 z-10`,children:[(0,y.jsx)(s,{variant:`ghost`,onClick:()=>c(`/courses/${n}/quizzes`),className:`mb-4`,children:`â† Back to Quizzes`}),(0,y.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,y.jsx)(`h1`,{className:`text-2xl font-bold`,children:d.title}),(0,y.jsxs)(`div`,{className:`flex gap-2`,children:[(0,y.jsxs)(s,{variant:`outline`,size:`sm`,onClick:()=>c(`/courses/${n}/quizzes/${t}/manage`),children:[(0,y.jsx)(l,{className:`h-4 w-4 mr-2`}),`Manage`]}),(0,y.jsxs)(s,{variant:`outline`,size:`sm`,onClick:()=>c(`/courses/${n}/quizzes/${t}/edit`),children:[(0,y.jsx)(u,{className:`h-4 w-4 mr-2`}),`Edit`]})]})]})]}),(0,y.jsxs)(`div`,{className:`space-y-6`,children:[(0,y.jsx)(x,{quiz:d}),p.length>0&&(0,y.jsxs)(`div`,{className:`space-y-4`,children:[(0,y.jsx)(`h2`,{className:`text-xl font-semibold`,children:`Your Attempts`}),p.map(e=>(0,y.jsx)(C,{attempt:e,quiz:d,showCorrectAnswers:d.showCorrectAnswers},e.id))]}),(0,y.jsx)(`div`,{className:`flex justify-center pt-4`,children:p.find(e=>!e.isCompleted)?(0,y.jsx)(s,{onClick:()=>b(p.find(e=>!e.isCompleted).id),size:`lg`,children:`Continue In-Progress Attempt`}):(0,y.jsx)(s,{onClick:_,size:`lg`,children:p.length>0?`Start New Attempt`:`Start Quiz`})})]})]}):(0,y.jsx)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,y.jsx)(`div`,{className:`flex items-center justify-center pt-8`,children:(0,y.jsx)(`p`,{className:`text-muted-foreground`,children:`Quiz not found.`})})})}const T=w;export{T as Component};