import{a as e,d as t,f as n,l as r,n as i,p as a}from"./index-7VbmLvrz.js";import{t as o}from"./clsx-DMxib4s8.js";var s=a(n(),1),c=a(e(),1),l=6,u=/^[A-Z]{3}[0-9]{3}$/,d=/^[A-Za-z0-9]+$/,f={invalid:`Invalid room code. Room code must be 3 letters followed by 3 numbers.`,invalidParam:`Invalid room code in URL. Please enter a room code manually.`,invalidCharacter:`Invalid character. Room code must be alphanumeric.`,length:`Room code must be ${l} characters`};function p({defaultValue:e,onSubmit:t,submitText:n}){let[r,i]=(0,s.useState)(),a=(0,s.useRef)({});(0,s.useEffect)(()=>{e&&!u.test(e)&&(i(f.invalidParam),Object.values(a.current).forEach(e=>{e.value=``}))},[e]);let p=(0,s.useCallback)(()=>{i(void 0);let e=Array.from({length:l}).map((e,t)=>a.current[t]?.value||(i(f.length),``)).join(``);if(!u.test(e)){i(f.invalid);return}return e},[]),m=(0,s.useCallback)(()=>{let e=p();e&&t(e)},[p,t]);return(0,c.jsxs)(`div`,{className:`flex flex-col gap-y-4 justify-center items-center`,children:[(0,c.jsx)(`div`,{className:`flex gap-x-4 justify-center items-center`,children:Array.from({length:l}).map((t,r)=>(0,c.jsx)(`input`,{autoFocus:r===0,autoCapitalize:`off`,autoComplete:`off`,autoCorrect:`off`,className:o(`px-3 py-2 rounded-lg border border-gray-300`,`font-mono text-3xl`,`bg-gray-200 text-center rounded-xl`,`tracking-wider`),defaultValue:e?.[r]??``,maxLength:1,ref:e=>{e&&(a.current[r]=e)},readOnly:!n,size:1,type:`text`,onKeyDown:e=>{if(e.currentTarget.value===``&&e.key===`Backspace`&&r>0){a.current[r-1]?.focus();return}e.key===`Enter`&&n&&m()},onInput:e=>{if(i(void 0),e.currentTarget.value.length>1){e.currentTarget.value=e.currentTarget.value[0];return}if(e.currentTarget.value&&!d.test(e.currentTarget.value)){e.currentTarget.value=``,i(f.invalidCharacter);return}e.currentTarget.value=e.currentTarget.value.toUpperCase(),e.currentTarget.value.length===1&&a.current[r+1]?.focus()},onPaste:e=>{e.preventDefault(),i(void 0);let t=e.clipboardData.getData(`text`).toUpperCase();if(!d.test(t)){i(f.invalidCharacter);return}Array.from(t).forEach((e,t)=>{a.current[t]&&(a.current[t].value=e)}),a.current[t.length>=l?l-1:t.length]?.focus()}},r))}),r&&(0,c.jsx)(`p`,{className:`text-red-500`,children:r}),n&&(0,c.jsx)(`button`,{className:o(`px-4 py-2 bg-blue-500 text-white`,`rounded-lg font-medium`,`hover:bg-blue-600 w-96 rounded-xl`),onClick:m,children:n})]})}var m=p,h=`code`;function g(){let[e,n]=t();(0,s.useEffect)(()=>{n(new URLSearchParams,{replace:!0})},[n]);let[a,l]=(0,s.useState)(),[u,d]=(0,s.useState)(0),f=(0,s.useCallback)(async e=>{if(!await i.rooms.joinRoom(e)){window.alert(`Room not found!`);return}l(e)},[]),p=r();return(0,c.jsxs)(`div`,{className:o(`w-full h-screen flex items-center justify-center`,`flex-col gap-y-8`),children:[(0,c.jsx)(`p`,{className:`text-4xl font-semibold`,children:`Join a Room`}),(0,c.jsx)(m,{defaultValue:e.get(h),onSubmit:f,submitText:a?void 0:`Join`},u),a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(`p`,{className:`text-2xl font-semibold`,children:`Ready to join?`}),(0,c.jsxs)(`div`,{className:`flex gap-x-4`,children:[(0,c.jsx)(`button`,{className:o(`bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg`,`transition-colors duration-300`),onClick:()=>{l(void 0),d(e=>e+1)},children:`Cancel`}),(0,c.jsx)(`button`,{className:o(`bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg`,`transition-colors duration-300`),onClick:()=>p(`/${a}`),children:`Join Room`})]})]})]})}const _=g;export{_ as Component};