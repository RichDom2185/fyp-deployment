import{b as e}from"./useQuery-L5Xtx9Ga.js";import{K as t,M as n,O as r,b as i,f as a,u as o}from"./index-BhFOQNBT.js";import{b as s}from"./createLucideIcon-fTqSzsiU.js";import"./dist-BWP1BH0m.js";import"./card-OqURSol_.js";import{b as c,c as l}from"./TableWidget-BJfg-Ety.js";import"./dist-ztOuzjD-.js";import"./dist-D522ueSb.js";import"./dist-edC1SBHW.js";const u=[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]],d=s(`book-open`,u),f=[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],p=s(`clock`,f),m=[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]],h=s(`eye`,m);var g=r(t()),_=r(n());function v(t,n,r){let{isLoading:a,data:o}=e({queryKey:[`analytics`,`content`,`most-accessed-materials`,t,n,r],queryFn:async()=>{let e=await i.GET(`/api/v1/analytics/content/most-accessed`,{params:{query:{courseId:t,startDate:n,endDate:r}}});return e.data}});return{isLoading:a,data:o}}function y(t){let{isLoading:n,data:r}=e({queryKey:[`analytics`,`content`,`average-time-spent`,t],queryFn:async()=>{let e=await i.GET(`/api/v1/analytics/content/average-time`,{params:{query:{courseId:t}}});return e.data}});return{isLoading:n,data:r}}function b(t,n,r){let{isLoading:a,data:o}=e({queryKey:[`analytics`,`content`,`engagement-over-time`,t,n,r],queryFn:async()=>{let e=await i.GET(`/api/v1/analytics/content/engagement-over-time`,{params:{query:{courseId:t,startDate:n,endDate:r}}});return e.data}});return{isLoading:a,data:o}}var x=r(o());const S={breadcrumb:`Content Analytics`},C=()=>{let e=a(e=>e.courses.currentCourseId),[t,n]=(0,_.useState)((0,g.default)().subtract(30,`day`)),[r,i]=(0,_.useState)((0,g.default)()),{data:o}=v(e,t.toISOString(),r.toISOString()),{data:s}=y(e),{data:u}=b(e,t.toISOString(),r.toISOString()),f=o?.materials.reduce((e,t)=>e+t.accessCount,0)??0;return(0,x.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,x.jsxs)(`div`,{children:[(0,x.jsx)(`h1`,{className:`text-3xl font-bold`,children:`Content Analytics`}),(0,x.jsx)(`p`,{className:`text-muted-foreground`,children:`Track material access and engagement`})]}),(0,x.jsxs)(`div`,{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-4`,children:[(0,x.jsx)(l,{title:`Total Content Views`,value:f,description:`Last 30 days`,icon:h}),(0,x.jsx)(l,{title:`Avg Time Spent`,value:`${((s?.averageSeconds??0)/60).toFixed(1)} min`,description:`Per content item`,icon:p}),(0,x.jsx)(l,{title:`Unique Materials`,value:o?.materials.length??0,description:`Accessed content`,icon:d})]}),(0,x.jsx)(c,{title:`Material Access Details`,columns:[{header:`Content ID`,accessorKey:`contentId`},{header:`Type`,accessorKey:`type`},{header:`Access Count`,accessorKey:`accessCount`,cell:e=>e.toLocaleString()}],data:o?.materials||[]})]})},w=C;w.displayName=`ContentAnalyticsDashboard`;var T=w;export{w as Component,T as default,S as handle};