import{n as e}from"./hooks-CYRrV7oD.js";import{C as t,K as n,W as r,n as i,s as a,t as o,w as s,y as c}from"./index-DkHy_0vr.js";import{i as l,n as u,r as d,t as f}from"./card-BBO2aCaD.js";import{t as p}from"./button-CVZMqZS2.js";import{t as m}from"./input-D350uBQc.js";import{t as h}from"./textarea-DnKqqzBp.js";import{t as g}from"./label-DTAA1nE2.js";var _=n(r()),v=n(s()),y=(({handleSubmit:e,onCancel:t})=>{let[n,r]=(0,_.useState)(``),[i,a]=(0,_.useState)(``),[o,s]=(0,_.useState)(null),[c,y]=(0,_.useState)(null),[b,x]=(0,_.useState)(null),[S,C]=(0,_.useState)(!1),[w,T]=(0,_.useState)(!1),[E,D]=(0,_.useState)(!0),[O,k]=(0,_.useState)(``),[A,j]=(0,_.useState)(!1);return(0,v.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),j(!0);try{e({title:n,description:i,timeLimit:o,maxAttempts:c,passingScore:b,isTimed:S,shuffleQuestions:w,showCorrectAnswers:E,dueDate:O||``})}finally{j(!1)}},children:[(0,v.jsxs)(f,{children:[(0,v.jsx)(d,{children:(0,v.jsx)(l,{children:`Quiz Details`})}),(0,v.jsxs)(u,{className:`space-y-4`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`title`,children:`Title *`}),(0,v.jsx)(m,{id:`title`,value:n,onChange:e=>r(e.target.value),required:!0,placeholder:`Enter quiz title`})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`description`,children:`Description`}),(0,v.jsx)(h,{id:`description`,value:i,onChange:e=>a(e.target.value),placeholder:`Enter quiz description (optional)`,rows:4})]}),(0,v.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`timeLimit`,children:`Time Limit (minutes)`}),(0,v.jsx)(m,{id:`timeLimit`,type:`number`,min:`0`,value:o??``,onChange:e=>s(e.target.value?parseInt(e.target.value):null),placeholder:`No limit`})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`maxAttempts`,children:`Max Attempts`}),(0,v.jsx)(m,{id:`maxAttempts`,type:`number`,min:`0`,value:c??``,onChange:e=>y(e.target.value?parseInt(e.target.value):null),placeholder:`Unlimited`})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`passingScore`,children:`Passing Score (%)`}),(0,v.jsx)(m,{id:`passingScore`,type:`number`,min:`0`,max:`100`,value:b??``,onChange:e=>x(e.target.value?parseInt(e.target.value):null),placeholder:`No requirement`})]}),(0,v.jsxs)(`div`,{children:[(0,v.jsx)(g,{htmlFor:`dueDate`,children:`Due Date`}),(0,v.jsx)(m,{id:`dueDate`,type:`datetime-local`,value:O,onChange:e=>k(e.target.value)})]})]}),(0,v.jsxs)(`div`,{className:`space-y-2`,children:[(0,v.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,v.jsx)(`input`,{type:`checkbox`,id:`isTimed`,checked:S,onChange:e=>C(e.target.checked),className:`h-4 w-4`}),(0,v.jsx)(g,{htmlFor:`isTimed`,className:`cursor-pointer`,children:`Enable time limit enforcement`})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,v.jsx)(`input`,{type:`checkbox`,id:`shuffleQuestions`,checked:w,onChange:e=>T(e.target.checked),className:`h-4 w-4`}),(0,v.jsx)(g,{htmlFor:`shuffleQuestions`,className:`cursor-pointer`,children:`Shuffle questions for each attempt`})]}),(0,v.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,v.jsx)(`input`,{type:`checkbox`,id:`showCorrectAnswers`,checked:E,onChange:e=>D(e.target.checked),className:`h-4 w-4`}),(0,v.jsx)(g,{htmlFor:`showCorrectAnswers`,className:`cursor-pointer`,children:`Show correct answers after submission`})]})]})]})]}),(0,v.jsxs)(`div`,{className:`flex justify-end gap-2 mt-6`,children:[(0,v.jsx)(p,{type:`button`,variant:`outline`,onClick:t,disabled:A,children:`Cancel`}),(0,v.jsx)(p,{type:`submit`,disabled:A||!n,children:A?`Creating...`:`Create Quiz`})]})]})});function b({onSuccess:n,onError:r}={}){let a=t();return e({mutationFn:async({courseId:e,...t})=>{let n=await i.POST(`/api/v1/courses/{courseId}/quizzes`,{params:{path:{courseId:e}},body:t});if(n.error)throw Error(`Failed to create quiz`);return n.data},errorMessage:`Failed to create quiz`,showSuccessToast:!0,successMessage:`Quiz created successfully`,onSuccess:e=>{a.invalidateQueries({queryKey:o.quizzes._def}),n?.(e)},onError:r})}const x=()=>{let e=a(e=>e.courses.currentCourseId),t=c(),n=b({onSuccess:n=>{t(`/courses/${e}/quizzes/${n.id}/edit`)}});return(0,v.jsxs)(`div`,{className:`max-w-3xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:[(0,v.jsxs)(`div`,{className:`sticky top-0 bg-background pt-8 pb-4 z-10`,children:[(0,v.jsx)(p,{variant:`ghost`,onClick:()=>t(`/courses/${e}/quizzes`),className:`mb-4`,children:`â† Back to Quizzes`}),(0,v.jsx)(`h1`,{className:`text-2xl font-bold`,children:`Create New Quiz`})]}),(0,v.jsx)(y,{handleSubmit:({title:t,description:r,timeLimit:i,maxAttempts:a,passingScore:o,isTimed:s,shuffleQuestions:c,showCorrectAnswers:l,dueDate:u})=>{e&&n.mutate({courseId:e,title:t,description:r||null,timeLimit:i&&i>0?i:null,maxAttempts:a&&a>0?a:null,passingScore:o??null,isTimed:s,shuffleQuestions:c,showCorrectAnswers:l,dueDate:u||null})},onCancel:()=>t(`/courses/${e}/quizzes`)})]})};x.displayName=`NewQuiz`;var S=x;export{x as Component,S as default};