import{t as e}from"./hooks-CYRrV7oD.js";import{H as t,K as n,W as r,s as i,t as a,w as o}from"./index-DkHy_0vr.js";import{t as s}from"./createLucideIcon-CjtwccN9.js";import"./card-BBO2aCaD.js";import{n as c,t as l}from"./TableWidget-DDEzmAcM.js";import"./table-BMtXcUaF.js";var u=s(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),d=s(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),f=s(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),p=n(t()),m=n(r());function h(t,n,r){return e({...a.analytics.content._ctx.mostAccessed(t,n,r),errorMessage:`Failed to load most accessed materials`,fallbackValue:void 0})}function g(t){return e({...a.analytics.content._ctx.averageTime(t),errorMessage:`Failed to load average time spent`,fallbackValue:void 0})}function _(t,n,r){return e({...a.analytics.content._ctx.engagementOverTime(t,n,r),errorMessage:`Failed to load engagement over time`,fallbackValue:void 0})}var v=n(o());const y={breadcrumb:`Content Analytics`},b=()=>{let e=i(e=>e.courses.currentCourseId),[t,n]=(0,m.useState)((0,p.default)().subtract(30,`day`)),[r,a]=(0,m.useState)((0,p.default)()),{data:o}=h(e,t.toISOString(),r.toISOString()),{data:s}=g(e),{data:y}=_(e,t.toISOString(),r.toISOString()),b=o?.materials.reduce((e,t)=>e+t.accessCount,0)??0;return(0,v.jsxs)(`div`,{className:`space-y-6 p-6`,children:[(0,v.jsxs)(`div`,{children:[(0,v.jsx)(`h1`,{className:`text-3xl font-bold`,children:`Content Analytics`}),(0,v.jsx)(`p`,{className:`text-muted-foreground`,children:`Track material access and engagement`})]}),(0,v.jsxs)(`div`,{className:`grid gap-4 md:grid-cols-2 lg:grid-cols-4`,children:[(0,v.jsx)(c,{title:`Total Content Views`,value:b,description:`Last 30 days`,icon:f}),(0,v.jsx)(c,{title:`Avg Time Spent`,value:`${((s?.averageSeconds??0)/60).toFixed(1)} min`,description:`Per content item`,icon:d}),(0,v.jsx)(c,{title:`Unique Materials`,value:o?.materials.length??0,description:`Accessed content`,icon:u})]}),(0,v.jsx)(l,{title:`Material Access Details`,columns:[{header:`Content ID`,accessorKey:`contentId`},{header:`Type`,accessorKey:`type`},{header:`Access Count`,accessorKey:`accessCount`,cell:e=>e.toLocaleString()}],data:o?.materials||[]})]})};b.displayName=`ContentAnalyticsDashboard`;var x=b;export{b as Component,x as default,y as handle};