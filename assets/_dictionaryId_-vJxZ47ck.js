import{t as e}from"./hooks-BVZKHwJG.js";import{K as t,T as n,Z as r,f as i,s as a,t as o,x as s}from"./index-De71N5Dy.js";import{t as c}from"./button-DPMtwoy8.js";import{t as l}from"./arrow-left-mY3QfGZJ.js";import{t as u}from"./pencil-BjtH5bEn.js";import{t as d}from"./plus-CkBlMRvf.js";import{t as f}from"./trash-2-CLVwMF63.js";import{t as p}from"./input-BU6q5fO9.js";import"./es2015-nRZsoKYs.js";import{a as m,i as h,o as g,r as _,s as v,t as y}from"./dialog-BifXuZ_c.js";import{t as b}from"./label-BYyMeIUc.js";import{a as x,i as S,n as C,o as w,r as T,t as E}from"./table-rrTSX0KC.js";import{t as D}from"./badge-BMO5XGh0.js";import{t as O}from"./textarea-B-9O50He.js";import{r as k,t as A}from"./dictionaries-CmwJwN_b.js";var j=r(t()),M=r(n());function N({open:e,onOpenChange:t,dictionaryId:n,onSuccess:r}){let[i,a]=(0,j.useState)(``),[o,s]=(0,j.useState)(``),[l,u]=(0,j.useState)(``),[d,f]=(0,j.useState)(``),[x,S]=(0,j.useState)(``),C=A({onSuccess:()=>{a(``),s(``),u(``),f(``),S(``),t(!1),r?.()}});return(0,M.jsx)(y,{open:e,onOpenChange:t,children:(0,M.jsxs)(_,{className:`sm:max-w-125`,children:[(0,M.jsxs)(g,{children:[(0,M.jsx)(v,{children:`Add Entry`}),(0,M.jsx)(h,{children:`Add a new term to the dictionary.`})]}),(0,M.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),C.mutate({dictionaryId:n,term:i,standardForm:o,phonemes:l||void 0,definition:d||void 0,aliases:x?x.split(`,`).map(e=>e.trim()).filter(Boolean):void 0})},className:`space-y-4`,children:[(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(b,{htmlFor:`term`,children:`Term`}),(0,M.jsx)(p,{id:`term`,placeholder:`e.g., chope`,value:i,onChange:e=>a(e.target.value),required:!0})]}),(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(b,{htmlFor:`standardForm`,children:`Standard Form`}),(0,M.jsx)(p,{id:`standardForm`,placeholder:`e.g., reserve`,value:o,onChange:e=>s(e.target.value),required:!0})]}),(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(b,{htmlFor:`phonemes`,children:`Phonemes (optional)`}),(0,M.jsx)(p,{id:`phonemes`,placeholder:`e.g., /tʃoʊp/`,value:l,onChange:e=>u(e.target.value)})]}),(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(b,{htmlFor:`definition`,children:`Definition (optional)`}),(0,M.jsx)(O,{id:`definition`,placeholder:`A brief definition of the term...`,value:d,onChange:e=>f(e.target.value)})]}),(0,M.jsxs)(`div`,{className:`space-y-2`,children:[(0,M.jsx)(b,{htmlFor:`aliases`,children:`Aliases (optional, comma-separated)`}),(0,M.jsx)(p,{id:`aliases`,placeholder:`e.g., book, reserve, hold`,value:x,onChange:e=>S(e.target.value)})]}),(0,M.jsxs)(m,{children:[(0,M.jsx)(c,{type:`button`,variant:`outline`,onClick:()=>t(!1),children:`Cancel`}),(0,M.jsx)(c,{type:`submit`,disabled:C.isPending,children:C.isPending?`Adding...`:`Add Entry`})]})]})]})})}var P=N;function F({entries:e,onEdit:t,dictionaryId:n}){let[r,i]=(0,j.useState)(``),a=k({dictionaryId:n,onError:e=>{console.error(`Failed to delete entry:`,e)}}),o=e.filter(e=>e.term.toLowerCase().includes(r.toLowerCase())||e.standardForm.toLowerCase().includes(r.toLowerCase()));return(0,M.jsxs)(`div`,{className:`space-y-4`,children:[(0,M.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,M.jsx)(p,{placeholder:`Search entries...`,value:r,onChange:e=>i(e.target.value),className:`max-w-sm`}),(0,M.jsxs)(`span`,{className:`text-sm text-muted-foreground`,children:[o.length,` of `,e.length,` entries`]})]}),(0,M.jsx)(`div`,{className:`rounded-md border`,children:(0,M.jsxs)(E,{children:[(0,M.jsx)(x,{children:(0,M.jsxs)(w,{children:[(0,M.jsx)(S,{className:`w-50`,children:`Term`}),(0,M.jsx)(S,{className:`w-50`,children:`Standard Form`}),(0,M.jsx)(S,{className:`w-37.5`,children:`Phonemes`}),(0,M.jsx)(S,{children:`Definition`}),(0,M.jsx)(S,{className:`w-25`,children:`Actions`})]})}),(0,M.jsx)(C,{children:o.length===0?(0,M.jsx)(w,{children:(0,M.jsx)(T,{colSpan:5,className:`text-center py-8 text-muted-foreground`,children:`No entries found`})}):o.map(e=>(0,M.jsxs)(w,{children:[(0,M.jsx)(T,{className:`font-medium`,children:e.term}),(0,M.jsx)(T,{children:e.standardForm}),(0,M.jsx)(T,{className:`font-mono text-sm`,children:e.phonemes||`-`}),(0,M.jsx)(T,{className:`max-w-75 truncate`,children:e.definition||`-`}),(0,M.jsx)(T,{children:(0,M.jsxs)(`div`,{className:`flex items-center gap-1`,children:[t&&(0,M.jsx)(c,{variant:`ghost`,size:`icon`,onClick:()=>t(e),children:(0,M.jsx)(u,{className:`h-4 w-4`})}),(0,M.jsx)(c,{variant:`ghost`,size:`icon`,onClick:()=>a.mutate(e.id),disabled:a.isPending,children:(0,M.jsx)(f,{className:`h-4 w-4 text-destructive`})})]})})]},e.id))})]})})]})}var I=F;function L(){let{dictionaryId:t}=s(),n=a(e=>e.courses.currentCourseId),[r,u]=(0,j.useState)(!1),{data:f,isLoading:p}=e({...o.dictionaries.detail(Number(t)),errorMessage:`Failed to load dictionary`,enabled:!!t}),{data:m=[],isLoading:h}=e({...o.dictionaries.entries(Number(t)),errorMessage:`Failed to load entries`,fallbackValue:[],enabled:!!t});return p||h?(0,M.jsx)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,M.jsx)(`div`,{className:`flex items-center justify-center pt-8`,children:(0,M.jsx)(`p`,{className:`text-muted-foreground`,children:`Loading dictionary...`})})}):f?(0,M.jsxs)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:[(0,M.jsxs)(`div`,{className:`sticky top-0 bg-background z-10 py-4`,children:[(0,M.jsxs)(i,{to:`/courses/${n}/dictionaries`,className:`inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4`,children:[(0,M.jsx)(l,{className:`h-4 w-4 mr-1`}),`Back to Dictionaries`]}),(0,M.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,M.jsxs)(`div`,{children:[(0,M.jsx)(`h1`,{className:`text-2xl font-bold`,children:f.name}),(0,M.jsxs)(`div`,{className:`flex items-center gap-2 mt-2`,children:[(0,M.jsx)(D,{variant:`secondary`,children:f.type}),(0,M.jsx)(D,{variant:`outline`,children:f.scope===`global`?`Global`:`Course`}),(0,M.jsx)(D,{variant:`secondary`,children:f.language})]}),f.description&&(0,M.jsx)(`p`,{className:`text-muted-foreground mt-2`,children:f.description})]}),(0,M.jsx)(`div`,{className:`flex gap-2`,children:(0,M.jsxs)(c,{variant:`outline`,onClick:()=>u(!0),children:[(0,M.jsx)(d,{className:`h-4 w-4 mr-2`}),`Add Entry`]})})]})]}),(0,M.jsxs)(`div`,{className:`mt-6`,children:[(0,M.jsxs)(`h2`,{className:`text-lg font-semibold mb-4`,children:[`Entries (`,m.length,`)`]}),(0,M.jsx)(I,{entries:m,dictionaryId:Number(t)})]}),(0,M.jsx)(P,{open:r,onOpenChange:u,dictionaryId:Number(t)})]}):(0,M.jsx)(`div`,{className:`max-w-5xl mx-auto px-6 pb-8 h-[calc(100vh-4rem)] overflow-y-auto`,children:(0,M.jsx)(`div`,{className:`flex items-center justify-center pt-8`,children:(0,M.jsx)(`p`,{className:`text-muted-foreground`,children:`Dictionary not found`})})})}const R=L;export{R as Component};