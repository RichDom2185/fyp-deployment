import{M as e,O as t,b as n,e as r,f as i,g as a,p as o,u as s}from"./index-BhFOQNBT.js";import{b as c}from"./createLucideIcon-fTqSzsiU.js";import{b as l}from"./RichTextEditor-DU64Jr9a.js";import{b as u}from"./check-WiVZgPj8.js";import{b as d}from"./chevrons-up-down-Cj4NjeI8.js";import{b as f}from"./plus-BLbU8cih.js";import"./x-C4RdNn0_.js";import{c as p,d as m,e as h,f as g,g as _}from"./dist-BWP1BH0m.js";import{b as v,d as y,e as b,g as x}from"./dist-ztOuzjD-.js";import"./dist-D522ueSb.js";import{b as S,c as C}from"./button-D5Dzo2oi.js";import{b as w,c as T}from"./dist-nqO5qK0j.js";import{b as E,c as ee}from"./dist-CCQcB0uV.js";import{b as D,c as O,e as k,f as te}from"./es2015-BEh5Ludu.js";import{b as A,c as j,d as M,e as N,f as P,g as F,h as ne,i as re,j as ie,k as ae}from"./dist-D0EIbawx.js";import"./dialog-B0p4r4sh.js";import{b as oe}from"./input-DOmlsFvp.js";import"./shim-0-BgrIWa.js";import{b as se,c as ce,d as le,e as ue,f as de}from"./dist-t_mG3zYn.js";import"./separator-D2MLSFpl.js";const fe=[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]],pe=c(`search`,fe);var I=t(e(),1),me=1,he=.9,ge=.8,_e=.17,ve=.1,ye=.999,be=.9999,xe=.99,Se=/[\\\/_+.#"@\[\(\{&]/,Ce=/[\\\/_+.#"@\[\(\{&]/g,we=/[\s-]/,Te=/[\s-]/g;function Ee(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?me:xe;var s=`${i},${a}`;if(o[s]!==void 0)return o[s];for(var c=r.charAt(a),l=n.indexOf(c,i),u=0,d,f,p,m;l>=0;)d=Ee(e,t,n,r,l+1,a+1,o),d>u&&(l===i?d*=me:Se.test(e.charAt(l-1))?(d*=ge,p=e.slice(i,l-1).match(Ce),p&&i>0&&(d*=ye**+p.length)):we.test(e.charAt(l-1))?(d*=he,m=e.slice(i,l-1).match(Te),m&&i>0&&(d*=ye**+m.length)):(d*=_e,i>0&&(d*=ye**+(l-i))),e.charAt(l)!==t.charAt(a)&&(d*=be)),(d<ve&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=Ee(e,t,n,r,l+1,a+2,o),f*ve>d&&(d=f*ve)),d>u&&(u=d),l=n.indexOf(c,l+1);return o[s]=u,u}function De(e){return e.toLowerCase().replace(Te,` `)}function Oe(e,t,n){return e=n&&n.length>0?`${e+` `+n.join(` `)}`:e,Ee(e,t,De(e),De(t),0,0,{})}var L=`[cmdk-group=""]`,R=`[cmdk-group-items=""]`,ke=`[cmdk-group-heading=""]`,Ae=`[cmdk-item=""]`,je=`${Ae}:not([aria-disabled="true"])`,Me=`cmdk-item-select`,z=`data-value`,Ne=(e,t,n)=>Oe(e,t,n),Pe=I.createContext(void 0),B=()=>I.useContext(Pe),Fe=I.createContext(void 0),Ie=()=>I.useContext(Fe),Le=I.createContext(void 0),Re=I.forwardRef((e,t)=>{let n=U(()=>{var t,n;return{search:``,value:(n=(t=e.value)??e.defaultValue)??``,selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=U(()=>new Set),i=U(()=>new Map),a=U(()=>new Map),o=U(()=>new Set),s=Ye(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:m,disablePointerSelection:h=!1,vimBindings:g=!0,..._}=e,v=T(),y=T(),b=T(),S=I.useRef(null),C=Ze();H(()=>{if(u!==void 0){let e=u.trim();n.current.value=e,w.emit()}},[u]),H(()=>{C(6,te)},[]);let w=I.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,o,c;if(!Object.is(n.current[e],t)){if(n.current[e]=t,e===`search`)k(),D(),C(1,O);else if(e===`value`){if(document.activeElement.hasAttribute(`cmdk-input`)||document.activeElement.hasAttribute(`cmdk-root`)){let e=document.getElementById(b);e?e.focus():(i=document.getElementById(v))==null||i.focus()}if(C(7,()=>{var e;n.current.selectedItemId=(e=A())?.id,w.emit()}),r||C(5,te),(a=s.current)?.value!==void 0){let e=t??``;(c=(o=s.current).onValueChange)==null||c.call(o,e);return}}w.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),E=I.useMemo(()=>({value:(e,t,r)=>{var i;t!==(i=a.current.get(e))?.value&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,ee(t,r)),C(2,()=>{D(),w.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),C(3,()=>{k(),D(),n.current.value||O(),w.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=A();C(4,()=>{k(),t?.getAttribute(`id`)===e&&O(),w.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e[`aria-label`],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:v,inputId:b,labelId:y,listInnerRef:S}),[]);function ee(e,t){var r,i;let a=(i=(r=s.current)?.filter)??Ne;return e?a(e,n.current.search,t):0}function D(){if(!n.current.search||s.current.shouldFilter===!1)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=S.current;j().sort((t,n)=>{var r,i;let a=t.getAttribute(`id`),o=n.getAttribute(`id`);return((r=e.get(o))??0)-((i=e.get(a))??0)}).forEach(e=>{let t=e.closest(R);t?t.appendChild(e.parentElement===t?e:e.closest(`${R} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${R} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=(t=S.current)?.querySelector(`${L}[${z}="${encodeURIComponent(e[0])}"]`);n?.parentElement.appendChild(n)})}function O(){let e=j().find(e=>e.getAttribute(`aria-disabled`)!==`true`),t=e?.getAttribute(z);w.setState(`value`,t||void 0)}function k(){var e,t,o,c;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let l=0;for(let i of r.current){let r=(t=(e=a.current.get(i))?.value)??``,s=(c=(o=a.current.get(i))?.keywords)??[],u=ee(r,s);n.current.filtered.items.set(i,u),u>0&&l++}for(let[e,t]of i.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=l}function te(){var e,t,n;let r=A();r&&((e=r.parentElement)?.firstChild===r&&((n=(t=r.closest(L))?.querySelector(ke))==null||n.scrollIntoView({block:`nearest`})),r.scrollIntoView({block:`nearest`}))}function A(){var e;return(e=S.current)?.querySelector(`${Ae}[aria-selected="true"]`)}function j(){var e;return Array.from((e=S.current)?.querySelectorAll(je)||[])}function M(e){let t=j()[e];t&&w.setState(`value`,t.getAttribute(z))}function N(e){var t;let n=A(),r=j(),i=r.findIndex(e=>e===n),a=r[i+e];(t=s.current)!=null&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&w.setState(`value`,a.getAttribute(z))}function P(e){let t=A(),n=t?.closest(L),r;for(;n&&!r;)n=e>0?qe(n,L):Je(n,L),r=n?.querySelector(je);r?w.setState(`value`,r.getAttribute(z)):N(e)}let F=()=>M(j().length-1),ne=e=>{e.preventDefault(),e.metaKey?F():e.altKey?P(1):N(1)},re=e=>{e.preventDefault(),e.metaKey?M(0):e.altKey?P(-1):N(-1)};return I.createElement(x.div,{ref:t,tabIndex:-1,..._,"cmdk-root":``,onKeyDown:e=>{var t;(t=_.onKeyDown)==null||t.call(_,e);let n=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||n))switch(e.key){case`n`:case`j`:g&&e.ctrlKey&&ne(e);break;case`ArrowDown`:ne(e);break;case`p`:case`k`:g&&e.ctrlKey&&re(e);break;case`ArrowUp`:re(e);break;case`Home`:e.preventDefault(),M(0);break;case`End`:e.preventDefault(),F();break;case`Enter`:{e.preventDefault();let t=A();if(t){let e=new Event(Me);t.dispatchEvent(e)}}}}},I.createElement(`label`,{"cmdk-label":``,htmlFor:E.inputId,id:E.labelId,style:$e},c),G(e,e=>I.createElement(Fe.Provider,{value:w},I.createElement(Pe.Provider,{value:E},e))))}),ze=I.forwardRef((e,t)=>{var n,r;let i=T(),a=I.useRef(null),o=I.useContext(Le),s=B(),c=Ye(e),l=(r=(n=c.current)?.forceMount)??o?.forceMount;H(()=>{if(!l)return s.item(i,o?.id)},[l]);let u=Xe(i,a,[e.value,e.children,a],e.keywords),d=Ie(),f=W(e=>e.value&&e.value===u.current),p=W(e=>l||s.filter()===!1?!0:e.search?e.filtered.items.get(i)>0:!0);I.useEffect(()=>{let t=a.current;if(!(!t||e.disabled))return t.addEventListener(Me,m),()=>t.removeEventListener(Me,m)},[p,e.onSelect,e.disabled]);function m(){var e,t;g(),(t=(e=c.current).onSelect)==null||t.call(e,u.current)}function g(){d.setState(`value`,u.current,!0)}if(!p)return null;let{disabled:_,value:v,onSelect:y,forceMount:b,keywords:S,...C}=e;return I.createElement(x.div,{ref:h(a,t),...C,id:i,"cmdk-item":``,role:`option`,"aria-disabled":!!_,"aria-selected":!!f,"data-disabled":!!_,"data-selected":!!f,onPointerMove:_||s.getDisablePointerSelection()?void 0:g,onClick:_?void 0:m},e.children)}),Be=I.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=T(),s=I.useRef(null),c=I.useRef(null),l=T(),u=B(),d=W(e=>i||u.filter()===!1?!0:e.search?e.filtered.groups.has(o):!0);H(()=>u.group(o),[]),Xe(o,s,[e.value,e.heading,c]);let f=I.useMemo(()=>({id:o,forceMount:i}),[i]);return I.createElement(x.div,{ref:h(s,t),...a,"cmdk-group":``,role:`presentation`,hidden:d?void 0:!0},n&&I.createElement(`div`,{ref:c,"cmdk-group-heading":``,"aria-hidden":!0,id:l},n),G(e,e=>I.createElement(`div`,{"cmdk-group-items":``,role:`group`,"aria-labelledby":n?l:void 0},I.createElement(Le.Provider,{value:f},e))))}),Ve=I.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=I.useRef(null),a=W(e=>!e.search);return!n&&!a?null:I.createElement(x.div,{ref:h(i,t),...r,"cmdk-separator":``,role:`separator`})}),He=I.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=Ie(),o=W(e=>e.search),s=W(e=>e.selectedItemId),c=B();return I.useEffect(()=>{e.value!=null&&a.setState(`search`,e.value)},[e.value]),I.createElement(x.input,{ref:t,...r,"cmdk-input":``,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,"aria-autocomplete":`list`,role:`combobox`,"aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":s,id:c.inputId,type:`text`,value:i?e.value:o,onChange:e=>{i||a.setState(`search`,e.target.value),n?.(e.target.value)}})}),Ue=I.forwardRef((e,t)=>{let{children:n,label:r=`Suggestions`,...i}=e,a=I.useRef(null),o=I.useRef(null),s=W(e=>e.selectedItemId),c=B();return I.useEffect(()=>{if(o.current&&a.current){let e=o.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty(`--cmdk-list-height`,n.toFixed(1)+`px`)})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),I.createElement(x.div,{ref:h(a,t),...i,"cmdk-list":``,role:`listbox`,tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:c.listId},G(e,e=>I.createElement(`div`,{ref:h(o,c.listInnerRef),"cmdk-list-sizer":``},e)))}),We=I.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...s}=e;return I.createElement(F,{open:n,onOpenChange:r},I.createElement(P,{container:o},I.createElement(N,{"cmdk-overlay":``,className:i}),I.createElement(j,{"aria-label":e.label,"cmdk-dialog":``,className:a},I.createElement(Re,{ref:t,...s}))))}),Ge=I.forwardRef((e,t)=>W(e=>e.filtered.count===0)?I.createElement(x.div,{ref:t,...e,"cmdk-empty":``,role:`presentation`}):null),Ke=I.forwardRef((e,t)=>{let{progress:n,children:r,label:i=`Loading...`,...a}=e;return I.createElement(x.div,{ref:t,...a,"cmdk-loading":``,role:`progressbar`,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},G(e,e=>I.createElement(`div`,{"aria-hidden":!0},e)))}),V=Object.assign(Re,{List:Ue,Item:ze,Input:He,Group:Be,Separator:Ve,Dialog:We,Empty:Ge,Loading:Ke});function qe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Je(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Ye(e){let t=I.useRef(e);return H(()=>{t.current=e}),t}var H=typeof window>`u`?I.useEffect:I.useLayoutEffect;function U(e){let t=I.useRef();return t.current===void 0&&(t.current=e()),t}function W(e){let t=Ie(),n=()=>e(t.snapshot());return I.useSyncExternalStore(t.subscribe,n,n)}function Xe(e,t,n,r=[]){let i=I.useRef(),a=B();return H(()=>{var o;let s=(()=>{var e;for(let t of n){if(typeof t==`string`)return t.trim();if(typeof t==`object`&&`current`in t)return t.current?(e=t.current.textContent)?.trim():i.current}})(),c=r.map(e=>e.trim());a.value(e,s,c),(o=t.current)==null||o.setAttribute(z,s),i.current=s}),i}var Ze=()=>{let[e,t]=I.useState(),n=U(()=>new Map);return H(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function Qe(e){let t=e.type;return typeof t==`function`?t(e.props):`render`in t?t.render(e.props):e}function G({asChild:e,children:t},n){return e&&I.isValidElement(t)?I.cloneElement(Qe(t),{ref:t.ref},n(t.props.children)):n(t)}var $e={position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,borderWidth:`0`},K=t(s());function et({className:e,...t}){return(0,K.jsx)(V,{"data-slot":`command`,className:_(`bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md`,e),...t})}function tt({className:e,...t}){return(0,K.jsxs)(`div`,{"data-slot":`command-input-wrapper`,className:`flex h-9 items-center gap-2 border-b px-3`,children:[(0,K.jsx)(pe,{className:`size-4 shrink-0 opacity-50`}),(0,K.jsx)(V.Input,{"data-slot":`command-input`,className:_(`placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]})}function nt({className:e,...t}){return(0,K.jsx)(V.List,{"data-slot":`command-list`,className:_(`max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto`,e),...t})}function rt({...e}){return(0,K.jsx)(V.Empty,{"data-slot":`command-empty`,className:`py-6 text-center text-sm`,...e})}function it({className:e,...t}){return(0,K.jsx)(V.Group,{"data-slot":`command-group`,className:_(`text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium`,e),...t})}function at({className:e,...t}){return(0,K.jsx)(V.Item,{"data-slot":`command-item`,className:_(`data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,e),...t})}var q=`Popover`,[ot,st]=y(q,[de]),J=de(),[ct,Y]=ot(q),lt=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,s=J(t),c=I.useRef(null),[l,u]=I.useState(!1),[d,f]=w({prop:r,defaultProp:i??!1,onChange:a,caller:q});return(0,K.jsx)(ue,{...s,children:(0,K.jsx)(ct,{scope:t,contentId:T(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:I.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:l,onCustomAnchorAdd:I.useCallback(()=>u(!0),[]),onCustomAnchorRemove:I.useCallback(()=>u(!1),[]),modal:o,children:n})})};lt.displayName=q;var ut=`PopoverAnchor`,dt=I.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(ut,n),a=J(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return I.useEffect(()=>(o(),()=>s()),[o,s]),(0,K.jsx)(se,{...a,...r,ref:t})});dt.displayName=ut;var ft=`PopoverTrigger`,pt=I.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(ft,n),a=J(n),o=g(t,i.triggerRef),s=(0,K.jsx)(x.button,{type:`button`,"aria-haspopup":`dialog`,"aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Dt(i.open),...r,ref:o,onClick:v(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:(0,K.jsx)(se,{asChild:!0,...a,children:s})});pt.displayName=ft;var mt=`PopoverPortal`,[ht,gt]=ot(mt,{forceMount:void 0}),_t=e=>{let{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=Y(mt,t);return(0,K.jsx)(ht,{scope:t,forceMount:n,children:(0,K.jsx)(b,{present:n||a.open,children:(0,K.jsx)(E,{asChild:!0,container:i,children:r})})})};_t.displayName=mt;var X=`PopoverContent`,vt=I.forwardRef((e,t)=>{let n=gt(X,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=Y(X,e.__scopePopover);return(0,K.jsx)(b,{present:r||a.open,children:a.modal?(0,K.jsx)(bt,{...i,ref:t}):(0,K.jsx)(xt,{...i,ref:t})})});vt.displayName=X;var yt=p(`PopoverContent.RemoveScroll`),bt=I.forwardRef((e,t)=>{let n=Y(X,e.__scopePopover),r=I.useRef(null),i=g(t,r),a=I.useRef(!1);return I.useEffect(()=>{let e=r.current;if(e)return D(e)},[]),(0,K.jsx)(O,{as:yt,allowPinchZoom:!0,children:(0,K.jsx)(St,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:v(e.onCloseAutoFocus,e=>{e.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:v(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=t.button===0&&t.ctrlKey===!0,r=t.button===2||n;a.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:v(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),xt=I.forwardRef((e,t)=>{let n=Y(X,e.__scopePopover),r=I.useRef(!1),i=I.useRef(!1);return(0,K.jsx)(St,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,t.detail.originalEvent.type===`pointerdown`&&(i.current=!0));let a=t.target,o=n.triggerRef.current?.contains(a);o&&t.preventDefault(),t.detail.originalEvent.type===`focusin`&&i.current&&t.preventDefault()}})}),St=I.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Y(X,n),p=J(n);return k(),(0,K.jsx)(te,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:(0,K.jsx)(ee,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:(0,K.jsx)(le,{"data-state":Dt(f.open),role:`dialog`,id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":`var(--radix-popper-transform-origin)`,"--radix-popover-content-available-width":`var(--radix-popper-available-width)`,"--radix-popover-content-available-height":`var(--radix-popper-available-height)`,"--radix-popover-trigger-width":`var(--radix-popper-anchor-width)`,"--radix-popover-trigger-height":`var(--radix-popper-anchor-height)`}})})})}),Ct=`PopoverClose`,wt=I.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=Y(Ct,n);return(0,K.jsx)(x.button,{type:`button`,...r,ref:t,onClick:v(e.onClick,()=>i.onOpenChange(!1))})});wt.displayName=Ct;var Tt=`PopoverArrow`,Et=I.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,i=J(n);return(0,K.jsx)(ce,{...i,...r,ref:t})});Et.displayName=Tt;function Dt(e){return e?`open`:`closed`}var Ot=lt,kt=pt,At=_t,jt=vt;function Mt({...e}){return(0,K.jsx)(Ot,{"data-slot":`popover`,...e})}function Nt({...e}){return(0,K.jsx)(kt,{"data-slot":`popover-trigger`,...e})}function Pt({className:e,align:t=`center`,sideOffset:n=4,...r}){return(0,K.jsx)(At,{children:(0,K.jsx)(jt,{"data-slot":`popover-content`,align:t,sideOffset:n,className:_(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden`,e),...r})})}const Z=`__create_new_option__`,Ft=(e,t)=>{let n=e.map(e=>({label:e.label,value:e.label,actualValue:e.value}));return t&&n.push({label:`Create (hidden)`,value:Z,actualValue:``}),n},It=(({options:e,placeholder:t,onSelect:n,onShouldCreate:r})=>{let[i,a]=(0,I.useState)(!1),[o,s]=(0,I.useState)(``),[c,l]=(0,I.useState)(``),p=Ft(e,!!r),m=e=>{l(e),n?.(e)},h=e=>{l(Z),r(e)};return(0,K.jsxs)(Mt,{open:i,onOpenChange:a,children:[(0,K.jsx)(Nt,{asChild:!0,children:(0,K.jsxs)(S,{variant:`outline`,role:`combobox`,"aria-expanded":i,className:`w-full justify-between`,children:[c===Z?(0,K.jsxs)(K.Fragment,{children:[`Create new: “`,o,`”`]}):c?p.find(e=>e.actualValue===c)?.label:t??`Select`,(0,K.jsx)(d,{className:`ml-2 h-4 w-4 shrink-0 opacity-50`})]})}),(0,K.jsx)(Pt,{className:`w-(--radix-popover-trigger-width) p-0`,children:(0,K.jsxs)(et,{filter:(e,t)=>{if(e===Z)return 1;let n=t.toLowerCase().split(/\s+/),r=e.toLowerCase();return n.every(e=>r.includes(e))?1:0},children:[(0,K.jsx)(tt,{placeholder:`Search`,value:o,onValueChange:s}),(0,K.jsxs)(nt,{children:[(0,K.jsx)(rt,{children:`No option found.`}),(0,K.jsxs)(it,{children:[p.filter(e=>e.value!==Z).map(e=>(0,K.jsxs)(at,{value:e.value,onSelect:()=>{m(e.actualValue===c?``:e.actualValue),a(!1)},children:[(0,K.jsx)(u,{className:_(`mr-2 h-4 w-4`,c===e.actualValue?`opacity-100`:`opacity-0`)}),e.label]},e.value)),r&&o&&(0,K.jsxs)(at,{value:Z,onSelect:()=>{h(o),a(!1)},children:[(0,K.jsx)(f,{className:`mr-2 h-4 w-4`}),`Create “`,o,`”…`]},Z)]})]})]})})]})});var Lt=It,Rt=`AlertDialog`,[zt,Bt]=y(Rt,[ae]),Q=ae(),Vt=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,K.jsx)(F,{...r,...n,modal:!0})};Vt.displayName=Rt;var Ht=`AlertDialogTrigger`,Ut=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(re,{...i,...r,ref:t})});Ut.displayName=Ht;var Wt=`AlertDialogPortal`,Gt=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,K.jsx)(P,{...r,...n})};Gt.displayName=Wt;var Kt=`AlertDialogOverlay`,qt=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(N,{...i,...r,ref:t})});qt.displayName=Kt;var $=`AlertDialogContent`,[Jt,Yt]=zt($),Xt=m(`AlertDialogContent`),Zt=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,children:r,...i}=e,a=Q(n),o=I.useRef(null),s=g(t,o),c=I.useRef(null);return(0,K.jsx)(ie,{contentName:$,titleName:Qt,docsSlug:`alert-dialog`,children:(0,K.jsx)(Jt,{scope:n,cancelRef:c,children:(0,K.jsxs)(j,{role:`alertdialog`,...a,...i,ref:s,onOpenAutoFocus:v(i.onOpenAutoFocus,e=>{e.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,K.jsx)(Xt,{children:r}),(0,K.jsx)(sn,{contentRef:o})]})})})});Zt.displayName=$;var Qt=`AlertDialogTitle`,$t=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(ne,{...i,...r,ref:t})});$t.displayName=Qt;var en=`AlertDialogDescription`,tn=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(M,{...i,...r,ref:t})});tn.displayName=en;var nn=`AlertDialogAction`,rn=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,K.jsx)(A,{...i,...r,ref:t})});rn.displayName=nn;var an=`AlertDialogCancel`,on=I.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=Yt(an,n),a=Q(n),o=g(t,i);return(0,K.jsx)(A,{...a,...r,ref:o})});on.displayName=an;var sn=({contentRef:e})=>{let t=`\`${$}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$}\` by passing a \`${en}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return I.useEffect(()=>{let n=document.getElementById(e.current?.getAttribute(`aria-describedby`));n||console.warn(t)},[t,e]),null},cn=Vt,ln=Ut,un=Gt,dn=qt,fn=Zt,pn=rn,mn=on,hn=$t,gn=tn;function _n({...e}){return(0,K.jsx)(cn,{"data-slot":`alert-dialog`,...e})}function vn({...e}){return(0,K.jsx)(ln,{"data-slot":`alert-dialog-trigger`,...e})}function yn({...e}){return(0,K.jsx)(un,{"data-slot":`alert-dialog-portal`,...e})}function bn({className:e,...t}){return(0,K.jsx)(dn,{"data-slot":`alert-dialog-overlay`,className:_(`data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50`,e),...t})}function xn({className:e,...t}){return(0,K.jsxs)(yn,{children:[(0,K.jsx)(bn,{}),(0,K.jsx)(fn,{"data-slot":`alert-dialog-content`,className:_(`bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg`,e),...t})]})}function Sn({className:e,...t}){return(0,K.jsx)(`div`,{"data-slot":`alert-dialog-header`,className:_(`flex flex-col gap-2 text-center sm:text-left`,e),...t})}function Cn({className:e,...t}){return(0,K.jsx)(`div`,{"data-slot":`alert-dialog-footer`,className:_(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,e),...t})}function wn({className:e,...t}){return(0,K.jsx)(hn,{"data-slot":`alert-dialog-title`,className:_(`text-lg font-semibold`,e),...t})}function Tn({className:e,...t}){return(0,K.jsx)(gn,{"data-slot":`alert-dialog-description`,className:_(`text-muted-foreground text-sm`,e),...t})}function En({className:e,variant:t,...n}){return(0,K.jsx)(pn,{className:_(C({variant:t}),e),...n})}function Dn({className:e,...t}){return(0,K.jsx)(mn,{className:_(C({variant:`outline`}),e),...t})}const On=()=>{let[e,t]=(0,I.useState)(``),[s,c]=(0,I.useState)(``),[u,d]=(0,I.useState)(``),f=(0,I.useRef)(null),p=i(e=>e.courses.currentCourseId),m=i(e=>e.modules.chapters).map(e=>({label:e.title,value:e.id})),h=r(),g=o(),_=async e=>{let t=await n.POST(`/api/v1/chapters`,{body:{title:e},params:{query:{courseId:p}}});if(!t.data)return null;let r={...t.data,id:t.data.id.toString(),modules:t.data.modules.map(e=>({...e,id:e.id.toString()}))};return h(a.addChapter(r)),t.data.id},v=async t=>{t.preventDefault(),t.stopPropagation();let r=f.current?.getHtmlContent();if(!r){window.alert(`Please enter content for the module.`);return}let i=null;u&&(i=await _(u));let o=await n.POST(`/api/v1/modules`,{body:{title:e,content:r},params:{query:{chapterId:parseInt(s)||i}}});o.data&&(h(a.setChapterModules({chapterId:o.data.chapterId.toString(),modules:o.data.modules.map(e=>({...e,id:e.id.toString()}))})),g(-1))};return(0,K.jsxs)(`div`,{className:`max-w-2xl mx-auto py-8`,children:[(0,K.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Create New Module`}),(0,K.jsxs)(`form`,{className:`space-y-6`,onSubmit:v,children:[(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{htmlFor:`module-title`,className:`block font-medium mb-1`,children:`Module Title`}),(0,K.jsx)(oe,{id:`module-title`,value:e,onChange:e=>t(e.target.value),placeholder:`Enter module title`})]}),(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{className:`block font-medium mb-1`,children:`Chapter`}),(0,K.jsx)(Lt,{options:m,placeholder:(0,K.jsx)(`span`,{className:`text-muted-foreground font-normal`,children:`Select chapter…`}),onSelect:e=>{d(``),c(e)},onShouldCreate:e=>{d(e),c(``)}}),u&&(0,K.jsxs)(`p`,{className:`mt-1 text-sm text-muted-foreground`,children:[`A new chapter “`,u,`” will be created once you save the module.`]})]}),(0,K.jsxs)(`div`,{children:[(0,K.jsx)(`label`,{className:`block font-medium mb-1`,children:`Content`}),(0,K.jsx)(l,{ref:f})]}),(0,K.jsxs)(`div`,{className:`flex gap-2 mt-4`,children:[(0,K.jsx)(S,{type:`submit`,children:`Save Module`}),(0,K.jsxs)(_n,{children:[(0,K.jsx)(vn,{asChild:!0,children:(0,K.jsx)(S,{type:`button`,variant:`outline`,children:`Cancel`})}),(0,K.jsxs)(xn,{children:[(0,K.jsxs)(Sn,{children:[(0,K.jsx)(wn,{children:`Cancel Module Creation?`}),(0,K.jsx)(Tn,{children:`Are you sure you want to cancel? Unsaved changes will be lost.`})]}),(0,K.jsxs)(Cn,{children:[(0,K.jsx)(Dn,{children:`Go Back`}),(0,K.jsx)(En,{variant:`destructive`,onClick:()=>g(-1),children:`Yes, Cancel`})]})]})]})]})]})]})},kn=On;kn.displayName=`New`;var An=kn;export{kn as Component,An as default};