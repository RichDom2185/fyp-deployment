import{M as e,O as t,b as n,f as r,j as i,u as a}from"./index-BhFOQNBT.js";import"./createLucideIcon-fTqSzsiU.js";import"./x-C4RdNn0_.js";import"./dist-BWP1BH0m.js";import"./dist-ztOuzjD-.js";import"./dist-D522ueSb.js";import{b as o}from"./button-D5Dzo2oi.js";import"./dist-nqO5qK0j.js";import"./dist-CCQcB0uV.js";import"./es2015-BEh5Ludu.js";import"./dist-D0EIbawx.js";import{b as s,d as c,f as l,g as u,h as d,i as f}from"./dialog-B0p4r4sh.js";import{b as p}from"./input-DOmlsFvp.js";import{b as m}from"./textarea-_Vg_ZXKD.js";var h=t(e()),g=t(a());const _=(({open:e,onOpenChange:t,handleSubmit:n})=>{let[r,i]=(0,h.useState)(``),[a,_]=(0,h.useState)(``),[v,y]=(0,h.useState)(!1),b=async()=>{y(!0);try{await n(r,a),i(``),_(``)}catch(e){console.error(`Error adding discussion:`,e),window.alert(`Failed to add discussion. Please try again.`)}finally{y(!1)}};return(0,g.jsxs)(s,{open:e,onOpenChange:t,children:[(0,g.jsx)(f,{asChild:!0,children:(0,g.jsx)(o,{children:`Add New Discussion`})}),(0,g.jsxs)(c,{children:[(0,g.jsx)(u,{children:(0,g.jsx)(d,{children:`Add New Discussion`})}),(0,g.jsxs)(`div`,{className:`space-y-4`,children:[(0,g.jsx)(p,{type:`text`,placeholder:`Title`,value:r,onChange:e=>i(e.target.value)}),(0,g.jsx)(m,{placeholder:`Description`,value:a,onChange:e=>_(e.target.value)})]}),(0,g.jsx)(l,{children:(0,g.jsx)(o,{type:`submit`,onClick:b,disabled:!r.trim()||!a.trim()||v,children:`Submit`})})]})]})});var v=_;const y=(({discussions:e})=>(0,g.jsx)(`div`,{className:`space-y-4`,children:e.length===0?(0,g.jsx)(`p`,{className:`pl-4 py-2 text-sm text-muted-foreground`,children:`No discussions yet.`}):(0,g.jsx)(`ul`,{className:`pl-4 py-2 space-y-1`,children:e.map(e=>(0,g.jsx)(`li`,{className:`flex items-center gap-2`,children:(0,g.jsx)(i,{to:`${e.id}`,className:`hover:underline flex-1`,children:e.title})},e.id))})}));var b=y;const x=()=>{let e=r(e=>e.courses.currentCourseId),t=r(e=>e.discussions.discussions),[i,a]=(0,h.useState)(!1),o=async(t,r)=>{await n.POST(`/api/v1/discussions`,{body:{courseId:e,title:t,description:r}}),a(!1)};return(0,g.jsxs)(`div`,{className:`max-w-2xl mx-auto py-8`,children:[(0,g.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Discussions`}),(0,g.jsx)(b,{discussions:t}),(0,g.jsx)(`div`,{className:`mt-6`,children:(0,g.jsx)(v,{open:i,onOpenChange:a,handleSubmit:o})})]})},S=x;S.displayName=`Discussion`;var C=S;export{S as Component,C as default};