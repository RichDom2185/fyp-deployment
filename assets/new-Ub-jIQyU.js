import{K as e,T as t,Z as n,c as r,n as i,o as a,s as o,y as s}from"./index-Ra2lGJdp.js";import{i as c,r as l,t as u}from"./utils-AMbbdZOx.js";import{n as d,t as f}from"./button-ZbUugITV.js";import{t as p}from"./RichTextEditor-CrFMIQDt.js";import{t as m}from"./check-BGz2SVJT.js";import{t as h}from"./chevrons-up-down-B0Yi-xZ7.js";import{t as g}from"./plus-DHQX-CAp.js";import{t as _}from"./search-BrWw_GdR.js";import{t as ee}from"./input-DWGpcTdi.js";import{t as v}from"./dist-BWGUlVcS.js";import"./separator-BVBrznAq.js";import{c as te,i as y,s as b}from"./dist-DJAMxPU4.js";import{n as x}from"./dist-hYCiSZWy.js";import"./es2015-B0iSd3k2.js";import{_ as S,d as C,f as w,g as ne,h as T,l as E,m as D,p as O,u as k,v as A}from"./dialog-ZgoMsabM.js";import"./shim-D_jmsJEB.js";import{n as j,r as M,t as N}from"./popover-zjDvaFk7.js";var P=n(e(),1),F=1,I=.9,L=.8,re=.17,R=.1,z=.999,ie=.9999,ae=.99,oe=/[\\\/_+.#"@\[\(\{&]/,se=/[\\\/_+.#"@\[\(\{&]/g,ce=/[\s-]/,le=/[\s-]/g;function B(e,t,n,r,i,a,o){if(a===t.length)return i===e.length?F:ae;var s=`${i},${a}`;if(o[s]!==void 0)return o[s];for(var c=r.charAt(a),l=n.indexOf(c,i),u=0,d,f,p,m;l>=0;)d=B(e,t,n,r,l+1,a+1,o),d>u&&(l===i?d*=F:oe.test(e.charAt(l-1))?(d*=L,p=e.slice(i,l-1).match(se),p&&i>0&&(d*=z**+p.length)):ce.test(e.charAt(l-1))?(d*=I,m=e.slice(i,l-1).match(le),m&&i>0&&(d*=z**+m.length)):(d*=re,i>0&&(d*=z**+(l-i))),e.charAt(l)!==t.charAt(a)&&(d*=ie)),(d<R&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=B(e,t,n,r,l+1,a+2,o),f*R>d&&(d=f*R)),d>u&&(u=d),l=n.indexOf(c,l+1);return o[s]=u,u}function ue(e){return e.toLowerCase().replace(le,` `)}function de(e,t,n){return e=n&&n.length>0?`${e+` `+n.join(` `)}`:e,B(e,t,ue(e),ue(t),0,0,{})}var V=`[cmdk-group=""]`,H=`[cmdk-group-items=""]`,fe=`[cmdk-group-heading=""]`,pe=`[cmdk-item=""]`,me=`${pe}:not([aria-disabled="true"])`,he=`cmdk-item-select`,U=`data-value`,ge=(e,t,n)=>de(e,t,n),_e=P.createContext(void 0),W=()=>P.useContext(_e),ve=P.createContext(void 0),ye=()=>P.useContext(ve),be=P.createContext(void 0),xe=P.forwardRef((e,t)=>{let n=q(()=>({search:``,value:e.value??e.defaultValue??``,selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}})),r=q(()=>new Set),i=q(()=>new Map),a=q(()=>new Map),o=q(()=>new Set),s=Me(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:m,disablePointerSelection:h=!1,vimBindings:g=!0,..._}=e,ee=x(),te=x(),y=x(),b=P.useRef(null),S=Pe();K(()=>{if(u!==void 0){let e=u.trim();n.current.value=e,C.emit()}},[u]),K(()=>{S(6,O)},[]);let C=P.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,o;if(!Object.is(n.current[e],t)){if(n.current[e]=t,e===`search`)D(),T(),S(1,E);else if(e===`value`){if(document.activeElement.hasAttribute(`cmdk-input`)||document.activeElement.hasAttribute(`cmdk-root`)){let e=document.getElementById(y);e?e.focus():(i=document.getElementById(ee))==null||i.focus()}if(S(7,()=>{n.current.selectedItemId=k()?.id,C.emit()}),r||S(5,O),s.current?.value!==void 0){let e=t??``;(o=(a=s.current).onValueChange)==null||o.call(a,e);return}}C.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),w=P.useMemo(()=>({value:(e,t,r)=>{t!==a.current.get(e)?.value&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,ne(t,r)),S(2,()=>{T(),C.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),S(3,()=>{D(),T(),n.current.value||E(),C.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=k();S(4,()=>{D(),t?.getAttribute(`id`)===e&&E(),C.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:c||e[`aria-label`],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:ee,inputId:y,labelId:te,listInnerRef:b}),[]);function ne(e,t){let r=s.current?.filter??ge;return e?r(e,n.current.search,t):0}function T(){if(!n.current.search||s.current.shouldFilter===!1)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=b.current;A().sort((t,n)=>{let r=t.getAttribute(`id`),i=n.getAttribute(`id`);return(e.get(i)??0)-(e.get(r)??0)}).forEach(e=>{let t=e.closest(H);t?t.appendChild(e.parentElement===t?e:e.closest(`${H} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${H} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=b.current?.querySelector(`${V}[${U}="${encodeURIComponent(e[0])}"]`);t?.parentElement.appendChild(t)})}function E(){let e=A().find(e=>e.getAttribute(`aria-disabled`)!==`true`)?.getAttribute(U);C.setState(`value`,e||void 0)}function D(){if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let e=0;for(let t of r.current){let r=ne(a.current.get(t)?.value??``,a.current.get(t)?.keywords??[]);n.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of i.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=e}function O(){var e;let t=k();t&&(t.parentElement?.firstChild===t&&((e=t.closest(V)?.querySelector(fe))==null||e.scrollIntoView({block:`nearest`})),t.scrollIntoView({block:`nearest`}))}function k(){return b.current?.querySelector(`${pe}[aria-selected="true"]`)}function A(){return Array.from(b.current?.querySelectorAll(me)||[])}function j(e){let t=A()[e];t&&C.setState(`value`,t.getAttribute(U))}function M(e){var t;let n=k(),r=A(),i=r.findIndex(e=>e===n),a=r[i+e];(t=s.current)!=null&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&C.setState(`value`,a.getAttribute(U))}function N(e){let t=k()?.closest(V),n;for(;t&&!n;)t=e>0?Ae(t,V):je(t,V),n=t?.querySelector(me);n?C.setState(`value`,n.getAttribute(U)):M(e)}let F=()=>j(A().length-1),I=e=>{e.preventDefault(),e.metaKey?F():e.altKey?N(1):M(1)},L=e=>{e.preventDefault(),e.metaKey?j(0):e.altKey?N(-1):M(-1)};return P.createElement(v.div,{ref:t,tabIndex:-1,..._,"cmdk-root":``,onKeyDown:e=>{var t;(t=_.onKeyDown)==null||t.call(_,e);let n=e.nativeEvent.isComposing||e.keyCode===229;if(!(e.defaultPrevented||n))switch(e.key){case`n`:case`j`:g&&e.ctrlKey&&I(e);break;case`ArrowDown`:I(e);break;case`p`:case`k`:g&&e.ctrlKey&&L(e);break;case`ArrowUp`:L(e);break;case`Home`:e.preventDefault(),j(0);break;case`End`:e.preventDefault(),F();break;case`Enter`:{e.preventDefault();let t=k();if(t){let e=new Event(he);t.dispatchEvent(e)}}}}},P.createElement(`label`,{"cmdk-label":``,htmlFor:w.inputId,id:w.labelId,style:Ie},c),Y(e,e=>P.createElement(ve.Provider,{value:C},P.createElement(_e.Provider,{value:w},e))))}),Se=P.forwardRef((e,t)=>{let n=x(),r=P.useRef(null),i=P.useContext(be),a=W(),o=Me(e),s=o.current?.forceMount??i?.forceMount;K(()=>{if(!s)return a.item(n,i?.id)},[s]);let c=Ne(n,r,[e.value,e.children,r],e.keywords),u=ye(),d=J(e=>e.value&&e.value===c.current),f=J(e=>s||a.filter()===!1?!0:e.search?e.filtered.items.get(n)>0:!0);P.useEffect(()=>{let t=r.current;if(!(!t||e.disabled))return t.addEventListener(he,p),()=>t.removeEventListener(he,p)},[f,e.onSelect,e.disabled]);function p(){var e,t;m(),(t=(e=o.current).onSelect)==null||t.call(e,c.current)}function m(){u.setState(`value`,c.current,!0)}if(!f)return null;let{disabled:h,value:g,onSelect:_,forceMount:ee,keywords:te,...y}=e;return P.createElement(v.div,{ref:l(r,t),...y,id:n,"cmdk-item":``,role:`option`,"aria-disabled":!!h,"aria-selected":!!d,"data-disabled":!!h,"data-selected":!!d,onPointerMove:h||a.getDisablePointerSelection()?void 0:m,onClick:h?void 0:p},e.children)}),Ce=P.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,o=x(),s=P.useRef(null),c=P.useRef(null),u=x(),d=W(),f=J(e=>i||d.filter()===!1?!0:e.search?e.filtered.groups.has(o):!0);K(()=>d.group(o),[]),Ne(o,s,[e.value,e.heading,c]);let p=P.useMemo(()=>({id:o,forceMount:i}),[i]);return P.createElement(v.div,{ref:l(s,t),...a,"cmdk-group":``,role:`presentation`,hidden:f?void 0:!0},n&&P.createElement(`div`,{ref:c,"cmdk-group-heading":``,"aria-hidden":!0,id:u},n),Y(e,e=>P.createElement(`div`,{"cmdk-group-items":``,role:`group`,"aria-labelledby":n?u:void 0},P.createElement(be.Provider,{value:p},e))))}),we=P.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=P.useRef(null),a=J(e=>!e.search);return!n&&!a?null:P.createElement(v.div,{ref:l(i,t),...r,"cmdk-separator":``,role:`separator`})}),Te=P.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=e.value!=null,a=ye(),o=J(e=>e.search),s=J(e=>e.selectedItemId),c=W();return P.useEffect(()=>{e.value!=null&&a.setState(`search`,e.value)},[e.value]),P.createElement(v.input,{ref:t,...r,"cmdk-input":``,autoComplete:`off`,autoCorrect:`off`,spellCheck:!1,"aria-autocomplete":`list`,role:`combobox`,"aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":s,id:c.inputId,type:`text`,value:i?e.value:o,onChange:e=>{i||a.setState(`search`,e.target.value),n?.(e.target.value)}})}),Ee=P.forwardRef((e,t)=>{let{children:n,label:r=`Suggestions`,...i}=e,a=P.useRef(null),o=P.useRef(null),s=J(e=>e.selectedItemId),c=W();return P.useEffect(()=>{if(o.current&&a.current){let e=o.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty(`--cmdk-list-height`,n.toFixed(1)+`px`)})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),P.createElement(v.div,{ref:l(a,t),...i,"cmdk-list":``,role:`listbox`,tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:c.listId},Y(e,e=>P.createElement(`div`,{ref:l(o,c.listInnerRef),"cmdk-list-sizer":``},e)))}),De=P.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:o,...s}=e;return P.createElement(D,{open:n,onOpenChange:r},P.createElement(O,{container:o},P.createElement(w,{"cmdk-overlay":``,className:i}),P.createElement(k,{"aria-label":e.label,"cmdk-dialog":``,className:a},P.createElement(xe,{ref:t,...s}))))}),Oe=P.forwardRef((e,t)=>J(e=>e.filtered.count===0)?P.createElement(v.div,{ref:t,...e,"cmdk-empty":``,role:`presentation`}):null),ke=P.forwardRef((e,t)=>{let{progress:n,children:r,label:i=`Loading...`,...a}=e;return P.createElement(v.div,{ref:t,...a,"cmdk-loading":``,role:`progressbar`,"aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Y(e,e=>P.createElement(`div`,{"aria-hidden":!0},e)))}),G=Object.assign(xe,{List:Ee,Item:Se,Input:Te,Group:Ce,Separator:we,Dialog:De,Empty:Oe,Loading:ke});function Ae(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function je(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Me(e){let t=P.useRef(e);return K(()=>{t.current=e}),t}var K=typeof window>`u`?P.useEffect:P.useLayoutEffect;function q(e){let t=P.useRef();return t.current===void 0&&(t.current=e()),t}function J(e){let t=ye(),n=()=>e(t.snapshot());return P.useSyncExternalStore(t.subscribe,n,n)}function Ne(e,t,n,r=[]){let i=P.useRef(),a=W();return K(()=>{var o;let s=(()=>{for(let e of n){if(typeof e==`string`)return e.trim();if(typeof e==`object`&&`current`in e)return e.current?e.current.textContent?.trim():i.current}})(),c=r.map(e=>e.trim());a.value(e,s,c),(o=t.current)==null||o.setAttribute(U,s),i.current=s}),i}var Pe=()=>{let[e,t]=P.useState(),n=q(()=>new Map);return K(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function Fe(e){let t=e.type;return typeof t==`function`?t(e.props):`render`in t?t.render(e.props):e}function Y({asChild:e,children:t},n){return e&&P.isValidElement(t)?P.cloneElement(Fe(t),{ref:t.ref},n(t.props.children)):n(t)}var Ie={position:`absolute`,width:`1px`,height:`1px`,padding:`0`,margin:`-1px`,overflow:`hidden`,clip:`rect(0, 0, 0, 0)`,whiteSpace:`nowrap`,borderWidth:`0`},X=n(t());function Le({className:e,...t}){return(0,X.jsx)(G,{"data-slot":`command`,className:u(`bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md`,e),...t})}function Re({className:e,...t}){return(0,X.jsxs)(`div`,{"data-slot":`command-input-wrapper`,className:`flex h-9 items-center gap-2 border-b px-3`,children:[(0,X.jsx)(_,{className:`size-4 shrink-0 opacity-50`}),(0,X.jsx)(G.Input,{"data-slot":`command-input`,className:u(`placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50`,e),...t})]})}function ze({className:e,...t}){return(0,X.jsx)(G.List,{"data-slot":`command-list`,className:u(`max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto`,e),...t})}function Be({...e}){return(0,X.jsx)(G.Empty,{"data-slot":`command-empty`,className:`py-6 text-center text-sm`,...e})}function Ve({className:e,...t}){return(0,X.jsx)(G.Group,{"data-slot":`command-group`,className:u(`text-foreground **:[[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 **:[[cmdk-group-heading]]:px-2 **:[[cmdk-group-heading]]:py-1.5 **:[[cmdk-group-heading]]:text-xs **:[[cmdk-group-heading]]:font-medium`,e),...t})}function He({className:e,...t}){return(0,X.jsx)(G.Item,{"data-slot":`command-item`,className:u(`data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,e),...t})}var Z=`__create_new_option__`,Ue=(e,t)=>{let n=e.map(e=>({label:e.label,value:e.label,actualValue:e.value}));return t&&n.push({label:`Create (hidden)`,value:Z,actualValue:``}),n};function We({options:e,placeholder:t,onSelect:n,onShouldCreate:r}){let[i,a]=(0,P.useState)(!1),[o,s]=(0,P.useState)(``),[c,l]=(0,P.useState)(``),d=Ue(e,!!r),p=e=>{l(e),n?.(e)},_=e=>{l(Z),r(e)};return(0,X.jsxs)(N,{open:i,onOpenChange:a,children:[(0,X.jsx)(M,{asChild:!0,children:(0,X.jsxs)(f,{variant:`outline`,role:`combobox`,"aria-expanded":i,className:`w-full justify-between`,children:[c===Z?(0,X.jsxs)(X.Fragment,{children:[`Create new: “`,o,`”`]}):c?d.find(e=>e.actualValue===c)?.label:t??`Select`,(0,X.jsx)(h,{className:`ml-2 h-4 w-4 shrink-0 opacity-50`})]})}),(0,X.jsx)(j,{className:`w-(--radix-popover-trigger-width) p-0`,children:(0,X.jsxs)(Le,{filter:(e,t)=>{if(e===Z)return 1;let n=t.toLowerCase().split(/\s+/),r=e.toLowerCase();return n.every(e=>r.includes(e))?1:0},children:[(0,X.jsx)(Re,{placeholder:`Search`,value:o,onValueChange:s}),(0,X.jsxs)(ze,{children:[(0,X.jsx)(Be,{children:`No option found.`}),(0,X.jsxs)(Ve,{children:[d.filter(e=>e.value!==Z).map(e=>(0,X.jsxs)(He,{value:e.value,onSelect:()=>{p(e.actualValue===c?``:e.actualValue),a(!1)},children:[(0,X.jsx)(m,{className:u(`mr-2 h-4 w-4`,c===e.actualValue?`opacity-100`:`opacity-0`)}),e.label]},e.value)),r&&o&&(0,X.jsxs)(He,{value:Z,onSelect:()=>{_(o),a(!1)},children:[(0,X.jsx)(g,{className:`mr-2 h-4 w-4`}),`Create “`,o,`”…`]},Z)]})]})]})})]})}var Ge=We,Ke=`AlertDialog`,[qe,Je]=b(Ke,[A]),Q=A(),Ye=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,X.jsx)(D,{...r,...n,modal:!0})};Ye.displayName=Ke;var Xe=`AlertDialogTrigger`,Ze=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,X.jsx)(ne,{...i,...r,ref:t})});Ze.displayName=Xe;var Qe=`AlertDialogPortal`,$e=e=>{let{__scopeAlertDialog:t,...n}=e,r=Q(t);return(0,X.jsx)(O,{...r,...n})};$e.displayName=Qe;var et=`AlertDialogOverlay`,tt=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,X.jsx)(w,{...i,...r,ref:t})});tt.displayName=et;var $=`AlertDialogContent`,[nt,rt]=qe($),it=y(`AlertDialogContent`),at=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,children:r,...i}=e,a=Q(n),o=P.useRef(null),s=c(t,o),l=P.useRef(null);return(0,X.jsx)(S,{contentName:$,titleName:ot,docsSlug:`alert-dialog`,children:(0,X.jsx)(nt,{scope:n,cancelRef:l,children:(0,X.jsxs)(k,{role:`alertdialog`,...a,...i,ref:s,onOpenAutoFocus:te(i.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,X.jsx)(it,{children:r}),(0,X.jsx)(mt,{contentRef:o})]})})})});at.displayName=$;var ot=`AlertDialogTitle`,st=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,X.jsx)(T,{...i,...r,ref:t})});st.displayName=ot;var ct=`AlertDialogDescription`,lt=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,X.jsx)(C,{...i,...r,ref:t})});lt.displayName=ct;var ut=`AlertDialogAction`,dt=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,i=Q(n);return(0,X.jsx)(E,{...i,...r,ref:t})});dt.displayName=ut;var ft=`AlertDialogCancel`,pt=P.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=rt(ft,n),a=Q(n),o=c(t,i);return(0,X.jsx)(E,{...a,...r,ref:o})});pt.displayName=ft;var mt=({contentRef:e})=>{let t=`\`${$}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$}\` by passing a \`${ct}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return P.useEffect(()=>{document.getElementById(e.current?.getAttribute(`aria-describedby`))||console.warn(t)},[t,e]),null},ht=Ye,gt=Ze,_t=$e,vt=tt,yt=at,bt=dt,xt=pt,St=st,Ct=lt;function wt({...e}){return(0,X.jsx)(ht,{"data-slot":`alert-dialog`,...e})}function Tt({...e}){return(0,X.jsx)(gt,{"data-slot":`alert-dialog-trigger`,...e})}function Et({...e}){return(0,X.jsx)(_t,{"data-slot":`alert-dialog-portal`,...e})}function Dt({className:e,...t}){return(0,X.jsx)(vt,{"data-slot":`alert-dialog-overlay`,className:u(`data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50`,e),...t})}function Ot({className:e,...t}){return(0,X.jsxs)(Et,{children:[(0,X.jsx)(Dt,{}),(0,X.jsx)(yt,{"data-slot":`alert-dialog-content`,className:u(`bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg`,e),...t})]})}function kt({className:e,...t}){return(0,X.jsx)(`div`,{"data-slot":`alert-dialog-header`,className:u(`flex flex-col gap-2 text-center sm:text-left`,e),...t})}function At({className:e,...t}){return(0,X.jsx)(`div`,{"data-slot":`alert-dialog-footer`,className:u(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,e),...t})}function jt({className:e,...t}){return(0,X.jsx)(St,{"data-slot":`alert-dialog-title`,className:u(`text-lg font-semibold`,e),...t})}function Mt({className:e,...t}){return(0,X.jsx)(Ct,{"data-slot":`alert-dialog-description`,className:u(`text-muted-foreground text-sm`,e),...t})}function Nt({className:e,variant:t,...n}){return(0,X.jsx)(bt,{className:u(d({variant:t}),e),...n})}function Pt({className:e,...t}){return(0,X.jsx)(xt,{className:u(d({variant:`outline`}),e),...t})}function Ft(){let[e,t]=(0,P.useState)(``),[n,c]=(0,P.useState)(``),[l,u]=(0,P.useState)(``),d=(0,P.useRef)(null),m=o(e=>e.courses.currentCourseId),h=o(e=>e.modules.chapters).map(e=>({label:e.title,value:e.id})),g=a(),_=s(),v=async e=>{let t=await i.POST(`/api/v1/chapters`,{body:{title:e},params:{query:{courseId:m}}});if(!t.data)return null;let n={...t.data,id:t.data.id.toString(),modules:t.data.modules.map(e=>({...e,id:e.id.toString()}))};return g(r.addChapter(n)),t.data.id};return(0,X.jsxs)(`div`,{className:`max-w-2xl mx-auto py-8`,children:[(0,X.jsx)(`h1`,{className:`text-2xl font-bold mb-4`,children:`Create New Module`}),(0,X.jsxs)(`form`,{className:`space-y-6`,onSubmit:async t=>{t.preventDefault(),t.stopPropagation();let a=d.current?.getHtmlContent();if(!a){window.alert(`Please enter content for the module.`);return}let o=null;l&&(o=await v(l));let s=await i.POST(`/api/v1/modules`,{body:{title:e,content:a},params:{query:{chapterId:parseInt(n)||o}}});s.data&&(g(r.setChapterModules({chapterId:s.data.chapterId.toString(),modules:s.data.modules.map(e=>({...e,id:e.id.toString()}))})),_(-1))},children:[(0,X.jsxs)(`div`,{children:[(0,X.jsx)(`label`,{htmlFor:`module-title`,className:`block font-medium mb-1`,children:`Module Title`}),(0,X.jsx)(ee,{id:`module-title`,value:e,onChange:e=>t(e.target.value),placeholder:`Enter module title`})]}),(0,X.jsxs)(`div`,{children:[(0,X.jsx)(`label`,{className:`block font-medium mb-1`,children:`Chapter`}),(0,X.jsx)(Ge,{options:h,placeholder:(0,X.jsx)(`span`,{className:`text-muted-foreground font-normal`,children:`Select chapter…`}),onSelect:e=>{u(``),c(e)},onShouldCreate:e=>{u(e),c(``)}}),l&&(0,X.jsxs)(`p`,{className:`mt-1 text-sm text-muted-foreground`,children:[`A new chapter “`,l,`” will be created once you save the module.`]})]}),(0,X.jsxs)(`div`,{children:[(0,X.jsx)(`label`,{className:`block font-medium mb-1`,children:`Content`}),(0,X.jsx)(p,{ref:d})]}),(0,X.jsxs)(`div`,{className:`flex gap-2 mt-4`,children:[(0,X.jsx)(f,{type:`submit`,children:`Save Module`}),(0,X.jsxs)(wt,{children:[(0,X.jsx)(Tt,{asChild:!0,children:(0,X.jsx)(f,{type:`button`,variant:`outline`,children:`Cancel`})}),(0,X.jsxs)(Ot,{children:[(0,X.jsxs)(kt,{children:[(0,X.jsx)(jt,{children:`Cancel Module Creation?`}),(0,X.jsx)(Mt,{children:`Are you sure you want to cancel? Unsaved changes will be lost.`})]}),(0,X.jsxs)(At,{children:[(0,X.jsx)(Pt,{children:`Go Back`}),(0,X.jsx)(Nt,{variant:`destructive`,onClick:()=>_(-1),children:`Yes, Cancel`})]})]})]})]})]})]})}const It=Ft;export{It as Component};