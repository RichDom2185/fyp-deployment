import{n as e,t}from"./hooks-CYRrV7oD.js";import{C as n,K as r,W as i,l as a,n as o,o as s,t as c,w as l}from"./index-DkHy_0vr.js";import{t as u}from"./button-CVZMqZS2.js";import{a as d,i as f,n as p,o as m,r as h,s as g,t as _}from"./dialog-DV4qlhuR.js";import{t as v}from"./input-D350uBQc.js";import{t as y}from"./label-DTAA1nE2.js";var b=r(i());function x(){let{data:e}=t({...c.courses.all,staleTime:300*1e3,errorMessage:`Failed to load courses`,fallbackValue:[]}),n=s();(0,b.useEffect)(()=>{e&&n(a.setCoursesList(e))},[n,e])}function S({onSuccess:t,onError:r}={}){let i=n();return e({mutationFn:async e=>{let t=await o.POST(`/api/v1/courses`,{body:{name:e}});if(t.error)throw Error(`Failed to create course`);return t.data},errorMessage:`Failed to create course`,showSuccessToast:!0,successMessage:`Course created successfully`,onSuccess:e=>{i.invalidateQueries({queryKey:c.courses.all.queryKey}),t?.(e)},onError:r})}var C=r(l()),w=(({onChange:e})=>{let[t,n]=(0,b.useState)(``);return(0,b.useEffect)(()=>{e?.(t)},[t,e]),(0,C.jsx)(`div`,{className:`space-y-4`,children:(0,C.jsxs)(`div`,{className:`space-y-2`,children:[(0,C.jsx)(y,{htmlFor:`courseName`,children:`Course Name`}),(0,C.jsx)(v,{id:`courseName`,type:`text`,name:`courseName`,placeholder:`Introduction to React`,required:!0,value:t,onChange:e=>n(e.target.value)})]})})}),T=(({open:e,onCancel:t,onSubmit:n})=>{let[r,i]=(0,b.useState)(``);return(0,C.jsx)(_,{open:e,onOpenChange:e=>{e||t?.()},children:(0,C.jsx)(h,{children:(0,C.jsxs)(`form`,{onSubmit:e=>{e.preventDefault(),n?.(r)},className:`space-y-4`,children:[(0,C.jsxs)(m,{className:`space-y-0.5`,children:[(0,C.jsx)(g,{children:`Create New Course`}),(0,C.jsx)(f,{children:`You will automatically be assigned the "admin" role for the course.`})]}),(0,C.jsx)(w,{onChange:i}),(0,C.jsxs)(d,{children:[(0,C.jsx)(p,{asChild:!0,children:(0,C.jsx)(u,{type:`button`,variant:`destructive`,children:`Cancel`})}),(0,C.jsx)(u,{type:`submit`,disabled:!r.trim(),children:`Create`})]})]})})})});export{x as n,S as r,T as t};