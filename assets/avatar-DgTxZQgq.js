import{K as e,W as t,w as n}from"./index-DkHy_0vr.js";import{r}from"./dist-UfzXyJyC.js";import{i}from"./dist-9HtfvUSP.js";import{t as a}from"./dist-Pz7Ftqhn.js";import{t as o}from"./dist-viXdYPak.js";import{t as s}from"./dist-CWuE2bF6.js";import{t as c}from"./shim-CTE6O2qI.js";var l=c();function u(){return(0,l.useSyncExternalStore)(d,()=>!0,()=>!1)}function d(){return()=>{}}var f=e(t(),1),p=e(n(),1),m=`Avatar`,[h,g]=o(m),[_,v]=h(m),y=f.forwardRef((e,t)=>{let{__scopeAvatar:n,...r}=e,[i,a]=f.useState(`idle`);return(0,p.jsx)(_,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:(0,p.jsx)(s.span,{...r,ref:t})})});y.displayName=m;var b=`AvatarImage`,x=f.forwardRef((e,t)=>{let{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...c}=e,l=v(b,n),u=T(r,c),d=a(e=>{o(e),l.onImageLoadingStatusChange(e)});return i(()=>{u!==`idle`&&d(u)},[u,d]),u===`loaded`?(0,p.jsx)(s.img,{...c,ref:t,src:r}):null});x.displayName=b;var S=`AvatarFallback`,C=f.forwardRef((e,t)=>{let{__scopeAvatar:n,delayMs:r,...i}=e,a=v(S,n),[o,c]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){let e=window.setTimeout(()=>c(!0),r);return()=>window.clearTimeout(e)}},[r]),o&&a.imageLoadingStatus!==`loaded`?(0,p.jsx)(s.span,{...i,ref:t}):null});C.displayName=S;function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?`loaded`:`loading`):`error`:`idle`}function T(e,{referrerPolicy:t,crossOrigin:n}){let r=u(),a=f.useRef(null),o=(()=>r?(a.current||=new window.Image,a.current):null)(),[s,c]=f.useState(()=>w(o,e));return i(()=>{c(w(o,e))},[o,e]),i(()=>{let e=e=>()=>{c(e)};if(!o)return;let r=e(`loaded`),i=e(`error`);return o.addEventListener(`load`,r),o.addEventListener(`error`,i),t&&(o.referrerPolicy=t),typeof n==`string`&&(o.crossOrigin=n),()=>{o.removeEventListener(`load`,r),o.removeEventListener(`error`,i)}},[o,n,t]),s}var E=y,D=x,O=C;function k({className:e,...t}){return(0,p.jsx)(E,{"data-slot":`avatar`,className:r(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,e),...t})}function A({className:e,...t}){return(0,p.jsx)(D,{"data-slot":`avatar-image`,className:r(`aspect-square size-full`,e),...t})}function j({className:e,...t}){return(0,p.jsx)(O,{"data-slot":`avatar-fallback`,className:r(`bg-muted flex size-full items-center justify-center rounded-full`,e),...t})}export{j as n,A as r,k as t};